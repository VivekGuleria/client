function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var i=t[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{ijJw:function(e,t,c){"use strict";c.r(t),c.d(t,"ServiceProviderConfigModule",(function(){return yt}));var i,r=c("SVse"),a=c("iInd"),n=c("s7LF"),o=c("LvDl"),s=c("8Y7J"),l=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t,c){return t?o.filter(e,(function(e){return null!=e.searched&&!(-1===e.searched.toString().search(RegExp(t,"i")))})):e}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=s.Ub({name:"dataFilter",type:i,pure:!0}),i),d=c("7g+E"),u=c("qfBg"),f=c("/mFJ"),b=c("OC8m"),g=c("wTG2"),v=c("bOtU"),h=c("ienR");function m(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Contract ID is required "),s.ac())}function p(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,m,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.contractID.errors.required)}}function I(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Store Name & Code is required "),s.ac())}function D(e,t){if(1&e&&(s.bc(0,"div",27),s.Oc(1,I,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.storeID.errors.required)}}function y(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Service Provider ID is required "),s.ac())}function C(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,y,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.serviceProviderID.errors.required)}}function S(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Revenue Share is required "),s.ac())}function k(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,S,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.percentageTxnCharges.errors.required)}}function O(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," GST Rate is required "),s.ac())}function R(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,O,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.gstRate.errors.required)}}function P(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," TDS Rate is required "),s.ac())}function w(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,P,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.tdsRate.errors.required)}}function Q(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Effective Rate is required "),s.ac())}function M(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,Q,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.effectiveRate.errors.required)}}function x(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Effective Date is required "),s.ac())}function F(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,x,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.effectiveDate.errors.required)}}var L,V=function(e){return{"is-invalid":e}},T=function(e){return{error:e}},N=function(){return{isAnimated:!0,dateInputFormat:"MM/DD/YYYY",timezone:"UTC"}},q=((L=function(){function e(t,c,i,r,a,n,o){_classCallCheck(this,e),this.formBuilder=t,this.spinner=c,this.userService=i,this.serviceConfigurationService=r,this.dataFilter=a,this.notification=n,this.router=o,this.formSubmitted=!1,this.minDate=new Date,this.localDetails={},this.serviceProviderList=[],this.gstRate="00.00",this.revenue="00.00",this.tdsRate="00.00",this.effectiveRate="00.00"}return _createClass(e,[{key:"ngOnInit",value:function(){localStorage.getItem("service-config")&&(this.localDetails=JSON.parse(localStorage.getItem("service-config")),this.selectedContractID=this.localDetails.contractId),this.minDate.setDate(this.minDate.getDate()+1),this.getDropdownVals(),this.getServiceProviders(),this.createForm()}},{key:"getDropdownVals",value:function(){var e=this,t=[];this.serviceConfigurationService.getStoreDropdown({}).subscribe((function(c){c&&(c.forEach((function(e){t.push({label:e.storeId+" - "+e.storeName,value:e.storeId,contractId:e.contractId})})),e.storeList=t,e.allList=t)}))}},{key:"getServiceProviders",value:function(){var e=this,t=[];this.serviceConfigurationService.getServiceProviderList({merchantId:this.userService.userValue.merchantId}).subscribe((function(c){c&&(c.forEach((function(e){t.push({label:e.providerId+" - "+e.providerName,value:e.providerId})})),e.serviceProviderList=t)}))}},{key:"searchStore",value:function(e){if(!this.selectedContractID)return this.storeList=[];this.storeList=this.dataFilter.transform(this.allList,e.target.value)}},{key:"createForm",value:function(){var e,t,c,i;this.revenueConfigForm=this.formBuilder.group({merchantID:[null===(e=this.localDetails)||void 0===e?void 0:e.merchantId,[n.y.required]],contractID:[null===(t=this.localDetails)||void 0===t?void 0:t.contractId,[n.y.required]],serviceProviderID:[null,[n.y.required]],storeName:[null===(c=this.localDetails)||void 0===c?void 0:c.storeName,[n.y.required]],storeID:[null===(i=this.localDetails)||void 0===i?void 0:i.storeId,[n.y.required]],gstRate:[null,[n.y.required]],tdsRate:[null,[n.y.required]],percentageTxnCharges:[null,[n.y.required]],effectiveRate:[null,[n.y.required]],effectiveDate:[null,[n.y.required]]}),console.log(this.localDetails)}},{key:"f",get:function(){return this.revenueConfigForm.controls}},{key:"isNumber",value:function(e){var t=e.which?e.which:e.keyCode;return!(46!=t&&t>31&&(t<48||t>57)||e.target.value.indexOf(".")>-1&&e.target.value.split(".")[1].length>1||e.target.value.indexOf(".")>=0&&46==t)}},{key:"formatData",value:function(e,t){var c;c=e<10?"0"+Number(e).toFixed(2):Number(e)?Number(e).toFixed(2):"00.00","gst"===t&&(this.gstRate=c),"tds"===t&&(this.tdsRate=c),"revenue"===t&&(this.revenue=c),this.effectiveRate=parseFloat(this.revenue)/(100+parseFloat(this.gstRate))*(100-parseFloat(this.tdsRate)),this.effectiveRate=this.effectiveRate.toFixed(2)}},{key:"create",value:function(){var e=this;console.log(this.revenueConfigForm);var t=this.revenueConfigForm.value;if(t.createdBy=this.userService.userValue.userName,t.fixedTxnCharges=0,t.effectiveFixedAmount=0,t.isTxnChargesOnGross=0,t.minTxnCharges=null,t.maxTxnCharges=null,t.isEdit=!1,t.effectiveRate=this.effectiveRate,this.spinner.show(),this.formSubmitted=!0,this.revenueConfigForm.invalid)return console.log("hello"),console.log(this.revenueConfigForm.invalid),void this.spinner.hide();this.serviceConfigurationService.saveConfig(t).subscribe((function(t){e.spinner.hide(),e.notification.showSuccess("Saved Successfully!",""),e.router.navigate(["/service-provider/revenue-share-config"])}),(function(t){e.spinner.hide()}))}}]),e}()).\u0275fac=function(e){return new(e||L)(s.Vb(n.c),s.Vb(d.c),s.Vb(u.a),s.Vb(f.a),s.Vb(l),s.Vb(b.a),s.Vb(a.c))},L.\u0275cmp=s.Pb({type:L,selectors:[["app-add-revenue-share-config"]],features:[s.Hb([l])],decls:58,vars:48,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"animated","fadeIn"],[1,"card","mt-3"],[1,"card-header","pt-0",2,"font-weight","700"],[1,"fa","fa-th-large","ml-2","mt-3"],[1,"card-body"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-md-4"],["type","text","autocomplete","off","formControlName","contractID","disabled","",1,"form-control",3,"ngModel","ngClass","keyup","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["bindLabel","label","bindValue","value","appendTo","body","formControlName","storeID",3,"items","searchable","ngClass","readonly"],["style","font-size: 80%;color: #f86c6b;",4,"ngIf"],["appendTo","body","bindLabel","label","bindValue","value","formControlName","serviceProviderID",3,"items","searchable","ngClass"],["type","text","autocomplete","off","formControlName","percentageTxnCharges","mask","00.00",1,"form-control",2,"width","100%",3,"ngClass","ngModel","blur","ngModelChange"],["type","text","autocomplete","off","formControlName","gstRate","mask","00.00",1,"form-control",3,"ngClass","ngModel","blur","ngModelChange"],["type","text","autocomplete","off","mask","00.00","formControlName","tdsRate",1,"form-control",2,"width","100%",3,"ngClass","ngModel","blur","ngModelChange"],["type","text","autocomplete","off","formControlName","effectiveRate","disabled","",1,"form-control",2,"width","100%",3,"ngClass","ngModel","ngModelChange"],["type","text","bsDatepicker","","formControlName","effectiveDate",1,"form-control",3,"bsConfig","ngModel","ngClass","minDate","ngModelChange"],[1,"row","mt-3"],[1,"col-md-8"],[1,"col-md-4","d-flex"],["type","submit",1,"btn","btn-block","btn-primary","p-2","mt-2",3,"click"],["routerLink","/service-provider/revenue-share-config",1,"btn","btn-block","btn-danger","p-2","mt-2","ml-2"],[1,"invalid-feedback"],[4,"ngIf"],[2,"font-size","80%","color","#f86c6b"]],template:function(e,t){1&e&&(s.bc(0,"ngx-spinner",0),s.bc(1,"p",1),s.Qc(2,"Loading..."),s.ac(),s.ac(),s.bc(3,"div",2),s.bc(4,"div",3),s.bc(5,"div",4),s.Wb(6,"i",5),s.Qc(7," Add Store Configuration "),s.ac(),s.bc(8,"div",6),s.bc(9,"form",7),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"label"),s.Qc(13,"Contract ID"),s.ac(),s.bc(14,"input",10),s.jc("keyup",(function(e){return t.searchStore(e)}))("ngModelChange",(function(e){return t.selectedContractID=e})),s.ac(),s.Oc(15,p,2,1,"div",11),s.ac(),s.bc(16,"div",9),s.bc(17,"label"),s.Qc(18,"Store Name & Store Code"),s.ac(),s.Wb(19,"ng-select",12),s.Oc(20,D,2,1,"div",13),s.ac(),s.bc(21,"div",9),s.bc(22,"label"),s.Qc(23,"Service Provider ID"),s.ac(),s.Wb(24,"ng-select",14),s.Oc(25,C,2,1,"div",11),s.ac(),s.bc(26,"div",9),s.bc(27,"label"),s.Qc(28,"Revenue Share (%)"),s.ac(),s.bc(29,"input",15),s.jc("blur",(function(e){return t.formatData(e.target.value,"revenue")}))("ngModelChange",(function(e){return t.revenue=e})),s.ac(),s.Oc(30,k,2,1,"div",11),s.ac(),s.bc(31,"div",9),s.bc(32,"label"),s.Qc(33,"GST Rate (%)"),s.ac(),s.bc(34,"input",16),s.jc("blur",(function(e){return t.formatData(e.target.value,"gst")}))("ngModelChange",(function(e){return t.gstRate=e})),s.ac(),s.Oc(35,R,2,1,"div",11),s.ac(),s.bc(36,"div",9),s.bc(37,"label"),s.Qc(38,"TDS Rate (%)"),s.ac(),s.bc(39,"input",17),s.jc("blur",(function(e){return t.formatData(e.target.value,"tds")}))("ngModelChange",(function(e){return t.tdsRate=e})),s.ac(),s.Oc(40,w,2,1,"div",11),s.ac(),s.bc(41,"div",9),s.bc(42,"label"),s.Qc(43,"Effective Rate (%)"),s.ac(),s.bc(44,"input",18),s.jc("ngModelChange",(function(e){return t.effectiveRate=e})),s.ac(),s.Oc(45,M,2,1,"div",11),s.ac(),s.bc(46,"div",9),s.bc(47,"label"),s.Qc(48,"Effective Date "),s.ac(),s.bc(49,"input",19),s.jc("ngModelChange",(function(e){return t.effectiveDate=e})),s.ac(),s.Oc(50,F,2,1,"div",11),s.ac(),s.ac(),s.bc(51,"div",20),s.Wb(52,"div",21),s.bc(53,"div",22),s.bc(54,"button",23),s.jc("click",(function(){return t.create()})),s.Qc(55," Create "),s.ac(),s.bc(56,"button",24),s.Qc(57," Cancel "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&e&&(s.uc("fullScreen",!0),s.Ib(9),s.uc("formGroup",t.revenueConfigForm),s.Ib(5),s.uc("ngModel",t.selectedContractID)("ngClass",s.yc(31,V,t.formSubmitted&&t.f.contractID.errors)),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.contractID.errors),s.Ib(4),s.uc("items",t.storeList)("searchable",!0)("ngClass",s.yc(33,T,t.formSubmitted&&t.f.storeID.errors))("readonly",!0),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.storeID.errors),s.Ib(4),s.uc("items",t.serviceProviderList)("searchable",!0)("ngClass",s.yc(35,T,t.formSubmitted&&t.f.serviceProviderID.errors)),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.serviceProviderID.errors),s.Ib(4),s.uc("ngClass",s.yc(37,V,t.formSubmitted&&t.f.percentageTxnCharges.errors))("ngModel",t.revenue),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.percentageTxnCharges.errors),s.Ib(4),s.uc("ngClass",s.yc(39,V,t.formSubmitted&&t.f.gstRate.errors))("ngModel",t.gstRate),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.gstRate.errors),s.Ib(4),s.uc("ngClass",s.yc(41,V,t.formSubmitted&&t.f.tdsRate.errors))("ngModel",t.tdsRate),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.tdsRate.errors),s.Ib(4),s.uc("ngClass",s.yc(43,V,t.formSubmitted&&t.f.effectiveRate.errors))("ngModel",t.effectiveRate),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.effectiveRate.errors),s.Ib(4),s.uc("bsConfig",s.xc(45,N))("ngModel",t.effectiveDate)("ngClass",s.yc(46,V,t.formSubmitted&&t.f.effectiveDate.errors))("minDate",t.minDate),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.effectiveDate.errors))},directives:[d.a,n.A,n.o,n.h,n.b,n.n,n.f,r.l,r.n,g.a,v.a,h.b,h.a,a.d],styles:["label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:2px;padding-top:10px}.error[_ngcontent-%COMP%]{border:1px solid #f86c6b;border-radius:4%}  .ng-select-disabled .ng-arrow-wrapper{cursor:default;display:none!important}"]}),L),A=c("VHTt"),_=c("PSD3"),E=c.n(_),j=c("LqlI"),$=c("q17e"),U=c("xkgV");function G(e,t){if(1&e&&(s.bc(0,"div",29),s.bc(1,"p"),s.bc(2,"strong"),s.Qc(3,"Contract ID :"),s.ac(),s.Qc(4),s.bc(5,"strong"),s.Qc(6,"Store Code :"),s.ac(),s.Qc(7),s.bc(8,"strong"),s.Qc(9,"Store Name :"),s.ac(),s.Qc(10),s.ac(),s.ac()),2&e){var c=s.nc();s.Ib(4),s.Sc(" ",null==c.filterQueryStoreID?null:c.filterQueryStoreID.contractId," , \xa0 "),s.Ib(3),s.Sc(" ",null==c.filterQueryStoreID?null:c.filterQueryStoreID.value," , \xa0 "),s.Ib(3),s.Sc(" ",null==c.filterQueryStoreID?null:c.filterQueryStoreID.name," \xa0 ")}}function z(e,t){if(1&e&&(s.bc(0,"th",30),s.Qc(1),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.Sc(" ",c.label," ")}}function B(e,t){1&e&&(s.bc(0,"th",31),s.Qc(1,"Actions"),s.ac())}function W(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.ac()),2&e){var c=s.nc().$implicit,i=s.nc().$implicit;s.Ib(1),s.Rc(i[c.field]+"%")}}var Y=function(){return{visibility:"hidden"}},H=function(){return{visibility:"visible"}};function J(e,t){if(1&e){var c=s.cc();s.bc(0,"i",37),s.jc("click",(function(){s.Ic(c);var e=s.nc(3).$implicit,t=s.nc(2),i=s.Fc(40);return t.openEditModal(i,e)})),s.ac()}if(2&e){var i=s.nc(3).$implicit,r=s.nc(2);s.uc("ngStyle",i.createdBy==r.userName||i.checkerEffectiveDate>r.currentDate?s.xc(1,Y):s.xc(2,H))}}function Z(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.oc(2,"date"),s.Oc(3,J,1,3,"i",36),s.ac()),2&e){var c=s.nc(2).$implicit;s.Ib(1),s.Sc("",s.qc(2,2,c.effectiveDate,"dd/MM/yyyy")," "),s.Ib(2),s.uc("ngIf",c.isPast)}}function K(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.ac()),2&e){var c=s.nc(2).$implicit;s.Ib(1),s.Rc(c.status)}}function X(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.ac()),2&e){var c=s.nc(2).$implicit;s.Ib(1),s.Rc(c.serviceProviderID)}}function ee(e,t){if(1&e&&(s.bc(0,"td",30),s.Oc(1,W,2,1,"span",20),s.Oc(2,Z,4,5,"span",20),s.Oc(3,K,2,1,"span",20),s.Oc(4,X,2,1,"span",20),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.uc("ngIf","effectiveDate"!==c.field&&"status"!==c.field&&"serviceProviderID"!==c.field),s.Ib(1),s.uc("ngIf","effectiveDate"===c.field),s.Ib(1),s.uc("ngIf","status"===c.field),s.Ib(1),s.uc("ngIf","serviceProviderID"===c.field)}}function te(e,t){if(1&e){var c=s.cc();s.bc(0,"button",38),s.jc("click",(function(){s.Ic(c);var e=s.nc().$implicit;return s.nc(2).actionApply(e,"Approve")})),s.Qc(1,"Approve"),s.ac()}if(2&e){var i=s.nc().$implicit,r=s.nc(2);s.vc("title",i.createdBy==r.userName?"You cannnot approve self added configuration":""),s.uc("disabled",r.isDisabled(i))}}function ce(e,t){if(1&e){var c=s.cc();s.bc(0,"button",39),s.jc("click",(function(){s.Ic(c);var e=s.nc().$implicit;return s.nc(2).actionApply(e,"Reject")})),s.Qc(1,"Reject"),s.ac()}if(2&e){var i=s.nc().$implicit,r=s.nc(2);s.vc("title",i.createdBy==r.userName?"You Cannnot reject self added configuration":""),s.uc("disabled",r.isDisabled(i))}}var ie=function(e){return[e]};function re(e,t){if(1&e&&(s.bc(0,"tr"),s.Oc(1,ee,5,4,"td",33),s.bc(2,"td",31),s.Oc(3,te,2,2,"button",34),s.Oc(4,ce,2,2,"button",35),s.ac(),s.ac()),2&e){var c=s.nc(2);s.Ib(1),s.uc("ngForOf",c.cols),s.Ib(2),s.uc("appUserAccess",s.yc(3,ie,c.roleAccess.storeConfigurationApprovalChecker)),s.Ib(1),s.uc("appUserAccess",s.yc(5,ie,c.roleAccess.storeConfigurationApprovalChecker))}}var ae=function(e,t){return{itemsPerPage:e,currentPage:t}};function ne(e,t){if(1&e&&(s.bc(0,"tbody"),s.Oc(1,re,5,7,"tr",32),s.oc(2,"paginate"),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngForOf",s.qc(2,1,c.revenueShareList,s.zc(4,ae,c.itemsPerPage,c.page)))}}function oe(e,t){1&e&&(s.bc(0,"div",40),s.bc(1,"a",41),s.Qc(2," No Data found ! "),s.Wb(3,"br"),s.ac(),s.ac())}function se(e,t){if(1&e){var c=s.cc();s.bc(0,"div",42),s.jc("click",(function(){s.Ic(c);var e=t.$implicit;return s.nc().itemOnPage(e)})),s.Qc(1),s.ac()}if(2&e){var i=t.$implicit,r=s.nc();s.uc("ngClass",r.itemsPerPage==i?"item-number-active":"item-number"),s.Ib(1),s.Sc(" ",i,"")}}var le=function(){return{isAnimated:!0,dateInputFormat:"dd/MM/yyyy",timezone:"UTC"}};function de(e,t){if(1&e){var c=s.cc();s.bc(0,"div",43),s.bc(1,"h6"),s.Wb(2,"i",44),s.Qc(3,"Upadte Checker Effective Date"),s.ac(),s.bc(4,"button",45),s.jc("click",(function(){return s.Ic(c),s.nc().modalRef.hide()})),s.bc(5,"span",46),s.Qc(6,"\xd7"),s.ac(),s.ac(),s.ac(),s.bc(7,"div",47),s.bc(8,"form",48),s.bc(9,"div",49),s.Qc(10,"Effective From"),s.ac(),s.Wb(11,"input",50),s.ac(),s.ac(),s.bc(12,"div",51),s.bc(13,"button",52),s.jc("click",(function(){return s.Ic(c),s.nc().updateRecord()})),s.Qc(14,"Update"),s.ac(),s.bc(15,"button",53),s.jc("click",(function(){return s.Ic(c),s.nc().close()})),s.Qc(16,"Cancel"),s.ac(),s.ac()}if(2&e){var i=s.nc();s.Ib(8),s.uc("formGroup",i.editCheckerRecordForm),s.Ib(3),s.uc("bsConfig",s.xc(3,le))("minDate",i.minDate)}}var ue,fe,be=((fe=function(){function e(t,c,i,r,a,n,o,s,l){_classCallCheck(this,e),this.router=t,this.spinner=c,this.serviceConfigurationService=i,this.dataFilter=r,this.notification=a,this.userService=n,this.modalService=o,this.formBuilder=s,this.notificationService=l,this.cols=[{label:"Service Provider ID",field:"serviceProviderID"},{label:"Revenue Share ",field:"percentageTxnCharges"},{label:"GST Rate ",field:"gstRate"},{label:"TDS Rate ",field:"tdsRate"},{label:"Effective Rate ",field:"effectiveRate"},{label:"Effective From",field:"effectiveDate"},{label:"Status",field:"status"}],this.roleAccess=A.a,this.filterQueryStoreID=null,this.filterQueryContractID=null,this.minDate=new Date,this.itemsPerPage=10,this.page=1,this.storeList=[],this.revenueShareList=[],this.searchedData=!1,this.isChecker=!1,this.itemPerPage=[10,15,20,25],this.merchantIds=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.userName=this.userService.userValue.userName,this.currentDate=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),this.minDate.setDate(this.minDate.getDate()+1),this.getDropdownVals()}},{key:"openEditModal",value:function(e,t){this.modalRef=this.modalService.show(e),this.selectedRecord=t,this.createForm()}},{key:"createForm",value:function(){this.editCheckerRecordForm=this.formBuilder.group({effectiveDate:[""]})}},{key:"f",get:function(){return this.editCheckerRecordForm.controls}},{key:"getDropdownVals",value:function(){var e=this,t=[];this.serviceConfigurationService.getStoreDropdown({merchantId:this.userService.userValue.merchantId}).subscribe((function(c){console.log(c.length),c&&(c.forEach((function(c){t.push({label:c.storeId+" - "+c.storeName,value:c.storeId,contractId:c.contractId,name:c.storeName,searched:c.storeId+"-"+c.storeName+"-"+c.contractId,merchantId:c.merchantid}),e.merchantIds.push(c.merchantid)})),0!=c.length&&e.displayData(),e.allList=t)}))}},{key:"searchStore",value:function(e){if(!this.filterQueryContractID)return this.storeList=[];this.storeList=this.dataFilter.transform(this.allList,e.target.value),this.filterQueryStoreID=null}},{key:"itemOnPage",value:function(e){this.page=0,this.itemsPerPage=e}},{key:"getPage",value:function(){return this.itemsPerPage?this.itemsPerPage:10}},{key:"getData",value:function(e,t){return!e||"effectiveRate"!==t&&"gstRate"!==t&&"tdsRate"!==t&&"fixedTxnCharges"!==t?e:e+" %"}},{key:"displayData",value:function(){var e=this;this.spinner.show();var t={};t.merchantIds=this.filterQueryStoreID?[this.filterQueryStoreID.merchantId]:this.merchantIds,this.serviceConfigurationService.getChekerList(t).subscribe((function(t){e.revenueShareList=t,e.totalRecords=e.revenueShareList?e.revenueShareList.length:0,e.revenueShareList=e.revenueShareList.sort((function(e,t){return t.effectiveDate-e.effectiveDate}));var c=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});e.revenueShareList.forEach((function(e){e.effectiveDate=new Date(e.effectiveDate).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),e.effectiveDate<=c&&Object.assign(e,{isPast:!0})})),e.spinner.hide()}))}},{key:"updateRecord",value:function(){var e=this;this.serviceConfigurationService.updateCheckerListRecord({configId:this.selectedRecord.configId,checkerEffectiveDate:this.editCheckerRecordForm.controls.effectiveDate.value}).subscribe((function(t){console.log(t),1==t?(e.notificationService.showSuccess("Updated Successfully",""),e.close(),e.displayData()):e.notificationService.showError("Update failed","")}))}},{key:"searchFnc",value:function(){if(!this.filterQueryContractID||!this.filterQueryStoreID)return this.notification.showInfo("Please enter Valid contract ID , Store Name or Store Code","");this.searchedData=!0,this.displayData()}},{key:"actionApply",value:function(e,t){var c,i=this;if(console.log(e.checkerEffectiveDate,this.currentDate),e.checkerEffectiveDate<=this.currentDate)E.a.fire({title:"Message",text:"Please update current effective date to future date"});else{var r={configId:null===(c=e)||void 0===c?void 0:c.configId,action:t.toUpperCase(),isEdit:!!e.isEdit&&e.isEdit};E.a.fire({text:"Are you sure you want to ".concat(t," this Record ?"),showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(e){e.isConfirmed&&i.serviceConfigurationService.setStatus(r).subscribe((function(e){i.displayData()}))}))}}},{key:"isDisabled",value:function(e){return(new Date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),e.checkerEffectiveDate=new Date(e.checkerEffectiveDate).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),e.createdBy===this.userService.userValue.userName}},{key:"close",value:function(){this.modalRef.hide()}}]),e}()).\u0275fac=function(e){return new(e||fe)(s.Vb(a.c),s.Vb(d.c),s.Vb(f.a),s.Vb(l),s.Vb(b.a),s.Vb(u.a),s.Vb(j.b),s.Vb(n.c),s.Vb(b.a))},fe.\u0275cmp=s.Pb({type:fe,selectors:[["app-checker"]],features:[s.Hb([l])],decls:41,vars:13,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"animated","fadeIn"],[1,"card","mt-3"],[1,"card-header","pt-0",2,"font-weight","700"],[1,"fa","fa-check-square-o","ml-2","mt-3"],[1,"card-body","pb-0","pt-2"],[1,"row","mb-3"],[1,"col-md-4"],[1,"input-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange","keyup"],["bindLabel","label","appendTo","body",3,"items","searchable","ngModel","ngModelChange"],[1,"col-md-4","pt-4"],[1,"btn","btn-primary","mt-1",3,"click"],["style","margin-top:-10px ;","class","pb-2 pl-2",4,"ngIf"],[1,"card",2,"margin-top","-15px"],[1,"card-body","pt-1","pl-1","pr-1","pb-0",2,"overflow-x","scroll"],[1,"table","table-responsive-lg"],["class","p-2","style","text-align: center;",4,"ngFor","ngForOf"],["style","text-align: center;",4,"appUserAccess"],[4,"ngIf"],["class","pb-2","style","text-align:center;",4,"ngIf"],[1,"card-footer","pt-2","pb-1"],[1,"row"],[1,"mt-1"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-8"],[1,"float-right","mr-1",3,"pageChange"],["template",""],[1,"pb-2","pl-2",2,"margin-top","-10px"],[1,"p-2",2,"text-align","center"],[2,"text-align","center"],[4,"ngFor","ngForOf"],["class","p-2","style","text-align: center",4,"ngFor","ngForOf"],["class","btn btn-sm btn-primary p-0 pl-2 pr-2 ",3,"title","disabled","click",4,"appUserAccess"],["class","btn btn-sm btn-danger ml-2 p-0 pl-2 pr-2",3,"title","disabled","click",4,"appUserAccess"],["class","fa fa-pencil","data-toggle","tooltip","data-placement","top","title","Edit effective date",3,"ngStyle","click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Edit effective date",1,"fa","fa-pencil",3,"ngStyle","click"],[1,"btn","btn-sm","btn-primary","p-0","pl-2","pr-2",3,"title","disabled","click"],[1,"btn","btn-sm","btn-danger","ml-2","p-0","pl-2","pr-2",3,"title","disabled","click"],[1,"pb-2",2,"text-align","center"],["href","javascript:void(0)",2,"font-size","16px","font-weight","500"],[3,"ngClass","click"],[1,"modal-header"],[1,"fa","fa-align-justify","mr-2"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"heading"],["type","text","bsDatepicker","","autocomplete","off","formControlName","effectiveDate",1,"form-control",3,"bsConfig","minDate"],[1,"modal-footer"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(s.bc(0,"ngx-spinner",0),s.bc(1,"p",1),s.Qc(2,"Loading..."),s.ac(),s.ac(),s.bc(3,"div",2),s.bc(4,"div",3),s.bc(5,"div",4),s.Wb(6,"i",5),s.Qc(7," Checker List "),s.ac(),s.bc(8,"div",6),s.bc(9,"div",7),s.bc(10,"div",8),s.bc(11,"label"),s.Qc(12," Contract ID , Store Name or Store Code"),s.ac(),s.bc(13,"div",9),s.bc(14,"input",10),s.jc("ngModelChange",(function(e){return t.filterQueryContractID=e}))("keyup",(function(e){return t.searchStore(e)})),s.ac(),s.ac(),s.ac(),s.bc(15,"div",8),s.bc(16,"label"),s.Qc(17," Store Code "),s.ac(),s.bc(18,"ng-select",11),s.jc("ngModelChange",(function(e){return t.filterQueryStoreID=e})),s.ac(),s.ac(),s.bc(19,"div",12),s.bc(20,"button",13),s.jc("click",(function(){return t.searchFnc()})),s.Qc(21," Search"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Oc(22,G,11,3,"div",14),s.bc(23,"div",15),s.bc(24,"div",16),s.bc(25,"table",17),s.bc(26,"thead"),s.bc(27,"tr"),s.Oc(28,z,2,1,"th",18),s.Oc(29,B,2,0,"th",19),s.ac(),s.ac(),s.Oc(30,ne,3,7,"tbody",20),s.ac(),s.Oc(31,oe,4,0,"div",21),s.ac(),s.bc(32,"div",22),s.bc(33,"div",23),s.bc(34,"div",8),s.bc(35,"div",24),s.Oc(36,se,2,2,"div",25),s.ac(),s.ac(),s.bc(37,"div",26),s.bc(38,"pagination-controls",27),s.jc("pageChange",(function(e){return t.page=e})),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Oc(39,de,17,4,"ng-template",null,28,s.Pc)),2&e&&(s.uc("fullScreen",!0),s.Ib(14),s.uc("ngModel",t.filterQueryContractID),s.Ib(4),s.uc("items",t.storeList)("searchable",!0)("ngModel",t.filterQueryStoreID),s.Ib(4),s.uc("ngIf",t.searchedData&&t.filterQueryStoreID),s.Ib(6),s.uc("ngForOf",t.cols),s.Ib(1),s.uc("appUserAccess",s.yc(11,ie,t.roleAccess.storeConfigurationApprovalChecker)),s.Ib(1),s.uc("ngIf",t.revenueShareList.length>0),s.Ib(1),s.uc("ngIf",0===t.totalRecords),s.Ib(5),s.uc("ngForOf",t.itemPerPage))},directives:[d.a,n.b,n.n,n.q,g.a,r.n,r.m,$.a,U.c,r.o,r.l,n.A,n.o,n.h,h.b,h.a,n.f],pipes:[U.b,r.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}label[_ngcontent-%COMP%]{font-weight:500}.badge[_ngcontent-%COMP%]{font-size:13px;color:#fff}th[_ngcontent-%COMP%]{white-space:nowrap}.highlight[_ngcontent-%COMP%]{background-color:#0ff}.grey-color[_ngcontent-%COMP%]{background-color:#ededed}.azure-color[_ngcontent-%COMP%]{background-color:#faffff}.heading[_ngcontent-%COMP%]{font-weight:700}"]}),fe),ge=((ue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ue)},ue.\u0275cmp=s.Pb({type:ue,selectors:[["app-revenue-share-config-details"]],decls:2,vars:0,template:function(e,t){1&e&&(s.bc(0,"p"),s.Qc(1,"revenue-share-config-details works!"),s.ac())},styles:[""]}),ue);function ve(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Contract ID is required "),s.ac())}function he(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,ve,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.contractID.errors.required)}}function me(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Store Name & Code is required "),s.ac())}function pe(e,t){if(1&e&&(s.bc(0,"div",27),s.Oc(1,me,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.storeID.errors.required)}}function Ie(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Service Provider ID is required "),s.ac())}function De(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,Ie,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.serviceProviderID.errors.required)}}function ye(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Revenue Share is required "),s.ac())}function Ce(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,ye,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.percentageTxnCharges.errors.required)}}function Se(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," GST Rate is required "),s.ac())}function ke(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,Se,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.gstRate.errors.required)}}function Oe(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," TDS Rate is required "),s.ac())}function Re(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,Oe,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.tdsRate.errors.required)}}function Pe(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Effective Rate is required "),s.ac())}function we(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,Pe,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.effectiveRate.errors.required)}}function Qe(e,t){1&e&&(s.bc(0,"div"),s.Qc(1," Effective Date is required "),s.ac())}function Me(e,t){if(1&e&&(s.bc(0,"div",25),s.Oc(1,Qe,2,0,"div",26),s.ac()),2&e){var c=s.nc();s.Ib(1),s.uc("ngIf",c.f.effectiveDate.errors.required)}}var xe,Fe=function(e){return{"is-invalid":e}},Le=function(e){return{error:e}},Ve=function(){return{isAnimated:!0,dateInputFormat:"MM/DD/YYYY",timezone:"UTC"}},Te=((xe=function(){function e(t,c,i,r,a,n,o){_classCallCheck(this,e),this.formBuilder=t,this.spinner=c,this.modalService=i,this.serviceConfigurationService=r,this.dataFilter=a,this.userService=n,this.notification=o,this.passData=new s.q,this.formSubmitted=!1,this.minDate=new Date,this.serviceProviderList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){localStorage.getItem("service-config")&&(this.localDetails=JSON.parse(localStorage.getItem("service-config")),this.selectedContractID=this.localDetails.contractId),this.minDate.setDate(this.minDate.getDate()+1),this.getDropdownVals(),this.getServiceProviders(),this.configDetails=this.modalService.config.initialState.data,console.log(this.configDetails),this.configDetails&&this.createForm()}},{key:"getDropdownVals",value:function(){var e=this,t=[];this.serviceConfigurationService.getStoreDropdown({}).subscribe((function(c){c&&(c.forEach((function(e){t.push({label:e.storeName+"_"+e.storeId,value:e.storeId,contractId:e.contractId})})),e.storeList=t,e.allList=t)}))}},{key:"getServiceProviders",value:function(){var e=this,t=[];this.serviceConfigurationService.getServiceProviderList({merchantId:this.userService.userValue.merchantId}).subscribe((function(c){c&&(c.forEach((function(e){t.push({label:e.providerId+" - "+e.providerName,value:e.providerId})})),e.serviceProviderList=t)}))}},{key:"searchStore",value:function(e){if(!this.selectedContractID)return this.storeList=[];this.storeList=this.dataFilter.transform(this.allList,e.target.value)}},{key:"createForm",value:function(){var e,t,c,i,r,a,o,s,l,d,u;this.revenueConfigForm=this.formBuilder.group({merchantID:[null===(e=this.localDetails)||void 0===e?void 0:e.merchantId,[n.y.required]],contractID:[null===(t=this.localDetails)||void 0===t?void 0:t.contractId,[n.y.required]],serviceProviderID:[null===(c=this.configDetails)||void 0===c?void 0:c.serviceProviderID,[n.y.required]],storeName:[null===(i=this.localDetails)||void 0===i?void 0:i.storeName,[n.y.required]],storeID:[null===(r=this.localDetails)||void 0===r?void 0:r.storeId,[n.y.required]],gstRate:[null===(a=this.configDetails)||void 0===a?void 0:a.gstRate,[n.y.required]],tdsRate:[null===(o=this.configDetails)||void 0===o?void 0:o.tdsRate,[n.y.required]],percentageTxnCharges:[null===(s=this.configDetails)||void 0===s?void 0:s.percentageTxnCharges,[n.y.required]],effectiveRate:[null===(l=this.configDetails)||void 0===l?void 0:l.effectiveRate,[n.y.required]],effectiveDate:[new Date(null===(d=this.configDetails)||void 0===d?void 0:d.effectiveDate),[n.y.required]]}),this.effectiveDate=new Date(this.configDetails.effectiveDate),this.refId=null===(u=this.configDetails)||void 0===u?void 0:u.configId,this.formatData(this.configDetails.gstRate,"gst"),this.formatData(this.configDetails.tdsRate,"tds"),this.formatData(this.configDetails.percentageTxnCharges,"revenue")}},{key:"f",get:function(){return this.revenueConfigForm.controls}},{key:"isNumber",value:function(e){var t=e.which?e.which:e.keyCode;return!(46!=t&&t>31&&(t<48||t>57)||e.target.value.indexOf(".")>-1&&e.target.value.split(".")[1].length>1||e.target.value.indexOf(".")>=0&&46==t)}},{key:"formatData",value:function(e,t){var c;c=e<10?"0"+Number(e).toFixed(2):Number(e)?Number(e).toFixed(2):"00.00","gst"===t&&(this.gstRate=c),"tds"===t&&(this.tdsRate=c),"revenue"===t&&(this.revenue=c),this.effectiveRate=parseFloat(this.revenue)/(100+parseFloat(this.gstRate))*(100-parseFloat(this.tdsRate)),this.effectiveRate=this.effectiveRate.toFixed(2)}},{key:"updateConfig",value:function(){var e=this;this.configDetails.gstRate=this.revenueConfigForm.value.gstRate,this.configDetails.tdsRate=this.revenueConfigForm.value.tdsRate,this.configDetails.percentageTxnCharges=this.revenueConfigForm.value.percentageTxnCharges,this.configDetails.effectiveDate=this.revenueConfigForm.value.effectiveDate,this.configDetails.refId=this.refId,this.configDetails.isEdit=!0,this.configDetails.configId=null,this.spinner.show(),this.formSubmitted=!0,this.revenueConfigForm.invalid?this.spinner.hide():this.serviceConfigurationService.editConfig(this.configDetails).subscribe((function(t){console.log(t),e.notification.showSuccess("Updated Successfully!",""),e.spinner.hide(),e.passData.emit(e.revenueConfigForm.value),e.cancel()}),(function(t){e.spinner.hide()}))}},{key:"cancel",value:function(){this.modalService._hideModal(1)}}]),e}()).\u0275fac=function(e){return new(e||xe)(s.Vb(n.c),s.Vb(d.c),s.Vb(j.b),s.Vb(f.a),s.Vb(l),s.Vb(u.a),s.Vb(b.a))},xe.\u0275cmp=s.Pb({type:xe,selectors:[["app-edit-revenue-share-config"]],outputs:{passData:"passData"},features:[s.Hb([l])],decls:58,vars:51,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"animated","fadeIn"],[1,"card"],[1,"card-header","pt-0",2,"font-weight","700"],[1,"fa","fa-th-large","ml-2","mt-3"],[1,"card-body"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-md-4"],["type","text","placeholder","Contract ID","autocomplete","off","formControlName","contractID",1,"form-control",3,"ngModel","ngClass","readonly","keyup","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["bindLabel","label","bindValue","value","appendTo","body","formControlName","storeID",3,"items","searchable","ngClass","readonly"],["style","font-size: 80%;color: #f86c6b;",4,"ngIf"],["bindLabel","label","bindValue","value","appendTo","body","formControlName","serviceProviderID",3,"items","searchable","ngClass","readonly"],["type","text","autocomplete","off","formControlName","percentageTxnCharges","mask","00.00",1,"form-control",2,"width","100%",3,"ngClass","ngModel","blur","ngModelChange"],["type","text","placeholder","GST Rate","autocomplete","off","formControlName","gstRate","mask","00.00",1,"form-control",3,"ngClass","ngModel","blur","ngModelChange"],["type","text","placeholder","TDS Rate","autocomplete","off","formControlName","tdsRate","mask","00.00",1,"form-control",2,"width","100%",3,"ngModel","ngClass","blur","ngModelChange"],["type","text","autocomplete","off","formControlName","effectiveRate",1,"form-control",2,"width","100%",3,"ngClass","ngModel","readonly","ngModelChange"],["type","text","placeholder","Effective Date","bsDatepicker","","formControlName","effectiveDate",1,"form-control",3,"bsConfig","ngModel","ngClass","minDate","ngModelChange"],[1,"row","mt-3"],[1,"col-md-8"],[1,"col-md-4","d-flex"],["type","submit",1,"btn","btn-block","btn-primary","p-2","mt-2",3,"click"],[1,"btn","btn-block","btn-danger","p-2","mt-2","ml-2",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[2,"font-size","80%","color","#f86c6b"]],template:function(e,t){1&e&&(s.bc(0,"ngx-spinner",0),s.bc(1,"p",1),s.Qc(2,"Loading..."),s.ac(),s.ac(),s.bc(3,"div",2),s.bc(4,"div",3),s.bc(5,"div",4),s.Wb(6,"i",5),s.Qc(7," Update Store Configuration "),s.ac(),s.bc(8,"div",6),s.bc(9,"form",7),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"label"),s.Qc(13,"Contract ID"),s.ac(),s.bc(14,"input",10),s.jc("keyup",(function(e){return t.searchStore(e)}))("ngModelChange",(function(e){return t.selectedContractID=e})),s.ac(),s.Oc(15,he,2,1,"div",11),s.ac(),s.bc(16,"div",9),s.bc(17,"label"),s.Qc(18,"Store Name & Store Code"),s.ac(),s.Wb(19,"ng-select",12),s.Oc(20,pe,2,1,"div",13),s.ac(),s.bc(21,"div",9),s.bc(22,"label"),s.Qc(23,"Service Provider ID"),s.ac(),s.Wb(24,"ng-select",14),s.Oc(25,De,2,1,"div",11),s.ac(),s.bc(26,"div",9),s.bc(27,"label"),s.Qc(28,"Revenue Share (%)"),s.ac(),s.bc(29,"input",15),s.jc("blur",(function(e){return t.formatData(e.target.value,"revenue")}))("ngModelChange",(function(e){return t.revenue=e})),s.ac(),s.Oc(30,Ce,2,1,"div",11),s.ac(),s.bc(31,"div",9),s.bc(32,"label"),s.Qc(33,"GST Rate (%)"),s.ac(),s.bc(34,"input",16),s.jc("blur",(function(e){return t.formatData(e.target.value,"gst")}))("ngModelChange",(function(e){return t.gstRate=e})),s.ac(),s.Oc(35,ke,2,1,"div",11),s.ac(),s.bc(36,"div",9),s.bc(37,"label"),s.Qc(38,"TDS Rate (%)"),s.ac(),s.bc(39,"input",17),s.jc("blur",(function(e){return t.formatData(e.target.value,"tds")}))("ngModelChange",(function(e){return t.tdsRate=e})),s.ac(),s.Oc(40,Re,2,1,"div",11),s.ac(),s.bc(41,"div",9),s.bc(42,"label"),s.Qc(43,"Effective Rate (%)"),s.ac(),s.bc(44,"input",18),s.jc("ngModelChange",(function(e){return t.effectiveRate=e})),s.ac(),s.Oc(45,we,2,1,"div",11),s.ac(),s.bc(46,"div",9),s.bc(47,"label"),s.Qc(48,"Effective Date "),s.ac(),s.bc(49,"input",19),s.jc("ngModelChange",(function(e){return t.effectiveDate=e})),s.ac(),s.Oc(50,Me,2,1,"div",11),s.ac(),s.ac(),s.bc(51,"div",20),s.Wb(52,"div",21),s.bc(53,"div",22),s.bc(54,"button",23),s.jc("click",(function(){return t.updateConfig()})),s.Qc(55," Update "),s.ac(),s.bc(56,"button",24),s.jc("click",(function(){return t.cancel()})),s.Qc(57," Cancel "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&e&&(s.uc("fullScreen",!0),s.Ib(9),s.uc("formGroup",t.revenueConfigForm),s.Ib(5),s.uc("ngModel",t.selectedContractID)("ngClass",s.yc(34,Fe,t.formSubmitted&&t.f.contractID.errors))("readonly",!0),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.contractID.errors),s.Ib(4),s.uc("items",t.storeList)("searchable",!0)("ngClass",s.yc(36,Le,t.formSubmitted&&t.f.storeID.errors))("readonly",!0),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.storeID.errors),s.Ib(4),s.uc("items",t.serviceProviderList)("searchable",!0)("ngClass",s.yc(38,Le,t.formSubmitted&&t.f.serviceProviderID.errors))("readonly",!0),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.serviceProviderID.errors),s.Ib(4),s.uc("ngClass",s.yc(40,Fe,t.formSubmitted&&t.f.percentageTxnCharges.errors))("ngModel",t.revenue),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.percentageTxnCharges.errors),s.Ib(4),s.uc("ngClass",s.yc(42,Fe,t.formSubmitted&&t.f.gstRate.errors))("ngModel",t.gstRate),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.gstRate.errors),s.Ib(4),s.uc("ngModel",t.tdsRate)("ngClass",s.yc(44,Fe,t.formSubmitted&&t.f.tdsRate.errors)),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.tdsRate.errors),s.Ib(4),s.uc("ngClass",s.yc(46,Fe,t.formSubmitted&&t.f.effectiveRate.errors))("ngModel",t.effectiveRate)("readonly",!0),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.effectiveRate.errors),s.Ib(4),s.uc("bsConfig",s.xc(48,Ve))("ngModel",t.effectiveDate)("ngClass",s.yc(49,Fe,t.formSubmitted&&t.f.effectiveDate.errors))("minDate",t.minDate),s.Ib(1),s.uc("ngIf",t.formSubmitted&&t.f.effectiveDate.errors))},directives:[d.a,n.A,n.o,n.h,n.b,n.n,n.f,r.l,r.n,g.a,v.a,h.b,h.a],styles:["label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:2px;padding-top:10px}.error[_ngcontent-%COMP%]{border:1px solid #f86c6b;border-radius:4%}  .ng-select-disabled .ng-arrow-wrapper{cursor:default;display:none!important}"]}),xe);function Ne(e,t){if(1&e&&(s.bc(0,"div",16),s.bc(1,"p"),s.bc(2,"strong"),s.Qc(3,"Contract ID :"),s.ac(),s.Qc(4),s.bc(5,"strong"),s.Qc(6,"Store Code :"),s.ac(),s.Qc(7),s.bc(8,"strong"),s.Qc(9,"Store Name :"),s.ac(),s.Qc(10),s.ac(),s.ac()),2&e){var c=s.nc();s.Ib(4),s.Sc(" ",null==c.filterQueryStoreID?null:c.filterQueryStoreID.contractId," , \xa0 "),s.Ib(3),s.Sc(" ",null==c.filterQueryStoreID?null:c.filterQueryStoreID.value," , \xa0 "),s.Ib(3),s.Sc(" ",null==c.filterQueryStoreID?null:c.filterQueryStoreID.name," \xa0 ")}}function qe(e,t){if(1&e&&(s.bc(0,"th"),s.Qc(1),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.Sc(" ",c.label," ")}}function Ae(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.ac()),2&e){var c=s.nc().$implicit,i=s.nc().$implicit,r=s.nc(3);s.Ib(1),s.Rc(r.getData(i[c.field],c.field,i))}}function _e(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.oc(2,"date"),s.ac()),2&e){var c=s.nc(2).$implicit;s.Ib(1),s.Rc(s.qc(2,1,c.effectiveDate,"MM/dd/yyyy"))}}function Ee(e,t){if(1&e&&(s.bc(0,"td",35),s.Oc(1,Ae,2,1,"span",21),s.Oc(2,_e,3,4,"span",21),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.uc("ngIf","effectiveDate"!==c.field),s.Ib(1),s.uc("ngIf","effectiveDate"===c.field)}}function je(e,t){if(1&e){var c=s.cc();s.bc(0,"i",36),s.jc("click",(function(){s.Ic(c);var e=s.nc().$implicit;return s.nc(3).openEditModal(e)})),s.ac()}}function $e(e,t){if(1&e&&(s.bc(0,"tr",31),s.Oc(1,Ee,3,2,"td",32),s.bc(2,"td",33),s.Oc(3,je,1,0,"i",34),s.ac(),s.ac()),2&e){var c=t.$implicit,i=s.nc(3);s.uc("ngClass",c.color?"highlight":c.isFuture?"azure-color":"grey-color"),s.Ib(1),s.uc("ngForOf",i.cols),s.Ib(2),s.uc("ngIf",c.isFuture)}}function Ue(e,t){1&e&&(s.bc(0,"span"),s.bc(1,"button",38),s.Qc(2," + Add New"),s.ac(),s.ac())}function Ge(e,t){if(1&e&&(s.bc(0,"td",37),s.Oc(1,Ue,3,0,"span",21),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.uc("ngIf","effectiveDate"===c.field)}}var ze=function(e,t){return{itemsPerPage:e,currentPage:t}};function Be(e,t){if(1&e&&(s.bc(0,"tbody"),s.Oc(1,$e,4,3,"tr",29),s.oc(2,"paginate"),s.bc(3,"tr"),s.Oc(4,Ge,2,1,"td",30),s.ac(),s.ac()),2&e){var c=s.nc(2);s.Ib(1),s.uc("ngForOf",s.qc(2,2,c.revenueShareList,s.zc(5,ze,c.itemsPerPage,c.page))),s.Ib(3),s.uc("ngForOf",c.cols)}}function We(e,t){1&e&&(s.bc(0,"div",39),s.bc(1,"a",40),s.Qc(2," No Data found ! "),s.Wb(3,"br"),s.bc(4,"button",41),s.Qc(5," + Add New"),s.ac(),s.ac(),s.ac())}function Ye(e,t){if(1&e){var c=s.cc();s.bc(0,"div",17),s.bc(1,"div",18),s.bc(2,"table",19),s.bc(3,"thead"),s.bc(4,"tr"),s.Oc(5,qe,2,1,"th",20),s.bc(6,"th"),s.Qc(7,"Actions"),s.ac(),s.ac(),s.ac(),s.Oc(8,Be,5,8,"tbody",21),s.ac(),s.Oc(9,We,6,0,"div",22),s.ac(),s.bc(10,"div",23),s.bc(11,"div",24),s.bc(12,"div",8),s.bc(13,"div",25),s.bc(14,"div",26),s.jc("click",(function(){return s.Ic(c),s.nc().itemOnPage(10)})),s.Qc(15," 10"),s.ac(),s.bc(16,"div",26),s.jc("click",(function(){return s.Ic(c),s.nc().itemOnPage(15)})),s.Qc(17," 15"),s.ac(),s.bc(18,"div",26),s.jc("click",(function(){return s.Ic(c),s.nc().itemOnPage(20)})),s.Qc(19," 20"),s.ac(),s.bc(20,"div",26),s.jc("click",(function(){return s.Ic(c),s.nc().itemOnPage(25)})),s.Qc(21," 25"),s.ac(),s.ac(),s.ac(),s.bc(22,"div",27),s.bc(23,"pagination-controls",28),s.jc("pageChange",(function(e){s.Ic(c);var t=s.nc();return t.pageChanged(t.page=e)})),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()}if(2&e){var i=s.nc();s.Ib(5),s.uc("ngForOf",i.cols),s.Ib(3),s.uc("ngIf",i.revenueShareList.length>0),s.Ib(1),s.uc("ngIf",0===i.totalRecords),s.Ib(5),s.uc("ngClass",10==i.itemsPerPage?"item-number-active":"item-number"),s.Ib(2),s.uc("ngClass",15==i.itemsPerPage?"item-number-active":"item-number"),s.Ib(2),s.uc("ngClass",20==i.itemsPerPage?"item-number-active":"item-number"),s.Ib(2),s.uc("ngClass",25==i.itemsPerPage?"item-number-active":"item-number")}}var He,Je=((He=function(){function e(t,c,i,r,n,o,s){var l=this;_classCallCheck(this,e),this.router=t,this.spinner=c,this.modalService=i,this.serviceConfigurationService=r,this.dataFilter=n,this.notification=o,this.userService=s,this.cols=[{label:"Service Provider ID",field:"serviceProviderID"},{label:"Revenue Share %",field:"percentageTxnCharges"},{label:"GST Rate %",field:"gstRate"},{label:"TDS Rate %",field:"tdsRate"},{label:"Effective Rate %",field:"effectiveRate"},{label:"Effective From",field:"effectiveDate"}],this.filterQueryStoreID=null,this.filterQueryContractID=null,this.itemsPerPage=10,this.page=1,this.dateArray=[],this.storeList=[],this.revenueShareList=[],this.searchedData=!1,this.isChecker=!1,this.offset=0,this.router.events.subscribe((function(e){e instanceof a.b&&"/service-provider/checker"===e.url&&(l.isChecker=!0)}))}return _createClass(e,[{key:"ngOnInit",value:function(){localStorage.removeItem("service-config"),this.getDropdownVals()}},{key:"getDropdownVals",value:function(){var e=this,t=[];this.serviceConfigurationService.getStoreDropdown({merchantId:this.userService.userValue.merchantId}).subscribe((function(c){c&&(c.forEach((function(e){t.push({label:e.storeId+" - "+e.storeName,value:e.storeId,contractId:e.contractId,name:e.storeName,searched:e.storeId+"-"+e.storeName+"-"+e.contractId,merchantId:e.merchantid})})),e.allList=t)}))}},{key:"searchStore",value:function(e){if(!this.filterQueryContractID)return this.storeList=[];this.storeList=this.dataFilter.transform(this.allList,e.target.value),this.filterQueryStoreID=null}},{key:"pageChanged",value:function(e){this.page=e,this.offset=this.page-1}},{key:"itemOnPage",value:function(e){this.page=0,this.itemsPerPage=e}},{key:"getPage",value:function(){return this.itemsPerPage?this.itemsPerPage:10}},{key:"getData",value:function(e,t,c){return"effectiveRate"===t?(c.percentageTxnCharges/(100+c.gstRate)*(100-c.tdsRate)).toFixed(2):e}},{key:"isPastDate",value:function(){var e=this,t=this.revenueShareList.find((function(t){var c,i;return t.effectiveDate===(null===(i=e.dateArray[(null===(c=e.dateArray)||void 0===c?void 0:c.length)-1])||void 0===i?void 0:i.effectiveDate)}));if(t)return t.color=!0}},{key:"openEditModal",value:function(e){var t=this;this.setOnLocal(),this.bsModalRef=this.modalService.show(Te,{initialState:{data:e},class:"modal-lg",backdrop:"static",keyboard:!1,animated:!0}),this.bsModalRef.content.passData.subscribe((function(e){t.displayData()}))}},{key:"SearcFnc",value:function(){if(this.pageChanged(1),!this.filterQueryContractID||!this.filterQueryStoreID)return this.notification.showInfo("Please enter Valid contract ID , Store Name or Store ID","");this.setOnLocal(),this.spinner.show(),this.displayData()}},{key:"setOnLocal",value:function(){localStorage.setItem("service-config",JSON.stringify({storeId:this.filterQueryStoreID.value,storeName:this.filterQueryStoreID.name,contractId:this.filterQueryStoreID.contractId,merchantId:this.filterQueryStoreID.merchantId}))}},{key:"displayData",value:function(){var e=this;this.serviceConfigurationService.getConfigList({merchantID:this.filterQueryStoreID.merchantId}).subscribe((function(t){e.searchedData=!0,e.revenueShareList=t,e.totalRecords=e.revenueShareList?e.revenueShareList.length:0,e.revenueShareList=e.revenueShareList.sort((function(e,t){return e.effectiveDate-t.effectiveDate})),e.revenueShareList.forEach((function(t){t.contractID=e.filterQueryStoreID.contractId,t.storeName=e.filterQueryStoreID.name,t.storeID=e.filterQueryStoreID.value,t.effectiveDate<Date.parse((new Date).toISOString())||t.effectiveDate===Date.parse((new Date).toISOString())?e.dateArray.push(t):t.isFuture=!0})),e.spinner.hide(),e.isPastDate()}))}}]),e}()).\u0275fac=function(e){return new(e||He)(s.Vb(a.c),s.Vb(d.c),s.Vb(j.b),s.Vb(f.a),s.Vb(l),s.Vb(b.a),s.Vb(u.a))},He.\u0275cmp=s.Pb({type:He,selectors:[["app-revenue-share-configuartion"]],features:[s.Hb([l])],decls:24,vars:8,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"animated","fadeIn"],[1,"card","mt-3"],[1,"card-header","pt-0",2,"font-weight","700"],[1,"fa","fa-th-large","ml-2","mt-3"],[1,"card-body","pb-0","pt-2",3,"ngClass"],[1,"row","mb-3"],[1,"col-md-4"],[1,"input-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange","keyup"],["bindLabel","label","appendTo","body",3,"items","searchable","ngModel","ngModelChange"],[1,"col-md-4","pt-4"],[1,"btn","btn-primary","mt-1",3,"click"],["style","margin-top:-10px ;","class","pb-2 pl-2",4,"ngIf"],["class","card ","style","margin-top:-15px ;",4,"ngIf"],[1,"pb-2","pl-2",2,"margin-top","-10px"],[1,"card",2,"margin-top","-15px"],[1,"card-body","pt-1","pl-1","pr-1","pb-0",2,"overflow-x","scroll"],[1,"table","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pb-2","style","text-align:center;",4,"ngIf"],[1,"card-footer","pt-2","pb-1"],[1,"row"],[1,"mt-1"],[3,"ngClass","click"],[1,"col-md-8"],[1,"float-right","mr-1",3,"pageChange"],[3,"ngClass",4,"ngFor","ngForOf"],["class","p-0","style","line-height:0;border:none;",4,"ngFor","ngForOf"],[3,"ngClass"],["class","p-2 pl-3",4,"ngFor","ngForOf"],[1,"p-2"],["class","fa fa-pencil m-2","data-toggle","tooltip","data-placement","top","title","Edit",3,"click",4,"ngIf"],[1,"p-2","pl-3"],["data-toggle","tooltip","data-placement","top","title","Edit",1,"fa","fa-pencil","m-2",3,"click"],[1,"p-0",2,"line-height","0","border","none"],["routerLink","/service-provider/add-revenue-share-config",1,"btn","btn-sm","btn-block","btn-primary","mt-2"],[1,"pb-2",2,"text-align","center"],["href","javascript:void(0)",2,"font-size","16px","font-weight","500"],["routerLink","/service-provider/add-revenue-share-config",1,"btn","btn-sm","btn-primary","mt-2","pl-5","pr-5"]],template:function(e,t){1&e&&(s.bc(0,"ngx-spinner",0),s.bc(1,"p",1),s.Qc(2,"Loading..."),s.ac(),s.ac(),s.bc(3,"div",2),s.bc(4,"div",3),s.bc(5,"div",4),s.Wb(6,"i",5),s.Qc(7," Store Configuration "),s.ac(),s.bc(8,"div",6),s.bc(9,"div",7),s.bc(10,"div",8),s.bc(11,"label"),s.Qc(12," Contract ID or Store Name or Store Code"),s.ac(),s.bc(13,"div",9),s.bc(14,"input",10),s.jc("ngModelChange",(function(e){return t.filterQueryContractID=e}))("keyup",(function(e){return t.searchStore(e)})),s.ac(),s.ac(),s.ac(),s.bc(15,"div",8),s.bc(16,"label"),s.Qc(17," Store Code "),s.ac(),s.bc(18,"ng-select",11),s.jc("ngModelChange",(function(e){return t.filterQueryStoreID=e})),s.ac(),s.ac(),s.bc(19,"div",12),s.bc(20,"button",13),s.jc("click",(function(){return t.SearcFnc()})),s.Qc(21," Search"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Oc(22,Ne,11,3,"div",14),s.Oc(23,Ye,24,7,"div",15),s.ac()),2&e&&(s.uc("fullScreen",!0),s.Ib(8),s.uc("ngClass",t.searchedData?"":"mb-3"),s.Ib(6),s.uc("ngModel",t.filterQueryContractID),s.Ib(4),s.uc("items",t.storeList)("searchable",!0)("ngModel",t.filterQueryStoreID),s.Ib(4),s.uc("ngIf",t.searchedData),s.Ib(1),s.uc("ngIf",t.searchedData))},directives:[d.a,r.l,n.b,n.n,n.q,g.a,r.n,r.m,U.c,a.d],pipes:[U.b,r.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}label[_ngcontent-%COMP%]{font-weight:500}.badge[_ngcontent-%COMP%]{font-size:13px;color:#fff}th[_ngcontent-%COMP%]{white-space:nowrap}.highlight[_ngcontent-%COMP%]{background-color:#0ff}.grey-color[_ngcontent-%COMP%]{background-color:#ededed}.azure-color[_ngcontent-%COMP%]{background-color:#faffff}"]}),He),Ze=c("wd/R"),Ke=c("id1S"),Xe=c("bpDJ"),et=c("kFe1");function tt(e,t){if(1&e&&(s.bc(0,"span"),s.Qc(1),s.ac()),2&e){var c=s.nc().$implicit;s.Ib(1),s.Sc(" ",c.label," \xa0 ")}}function ct(e,t){if(1&e&&(s.bc(0,"th"),s.Zb(1,27),s.Oc(2,tt,2,1,"span",28),s.Yb(),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.uc("ngSwitch",c.field)}}function it(e,t){if(1&e&&(s.bc(0,"div"),s.Qc(1),s.ac()),2&e){var c=s.nc().$implicit,i=s.nc().$implicit;s.Ib(1),s.Rc(i[c.field])}}function rt(e,t){if(1&e&&(s.bc(0,"div"),s.Qc(1),s.oc(2,"date"),s.ac()),2&e){var c=s.nc().$implicit,i=s.nc().$implicit;s.Ib(1),s.Rc(s.qc(2,1,1e3*i[c.field],"dd/MM/yyyy h:mma"))}}function at(e,t){if(1&e&&(s.bc(0,"div"),s.Qc(1),s.oc(2,"date"),s.ac()),2&e){var c=s.nc().$implicit,i=s.nc().$implicit;s.Ib(1),s.Rc(s.qc(2,1,1e3*i[c.field],"dd/MM/yyyy h:mma"))}}function nt(e,t){if(1&e&&(s.bc(0,"div"),s.Qc(1),s.oc(2,"date"),s.ac()),2&e){var c=s.nc().$implicit,i=s.nc().$implicit;s.Ib(1),s.Rc(s.qc(2,1,1e3*i[c.field],"dd/MM/yyyy h:mma"))}}function ot(e,t){if(1&e&&(s.bc(0,"td"),s.Oc(1,it,2,1,"div",30),s.Oc(2,rt,3,4,"div",30),s.Oc(3,at,3,4,"div",30),s.Oc(4,nt,3,4,"div",30),s.ac()),2&e){var c=t.$implicit;s.Ib(1),s.uc("ngIf","fromDate"!=c.field&&"toDate"!=c.field&&"createdAt"!=c.field&&"status"!=c.field),s.Ib(1),s.uc("ngIf","fromDate"==c.field),s.Ib(1),s.uc("ngIf","toDate"==c.field),s.Ib(1),s.uc("ngIf","createdAt"==c.field)}}function st(e,t){1&e&&(s.bc(0,"div",31),s.bc(1,"button",32),s.Qc(2," FAILED "),s.ac(),s.ac())}function lt(e,t){if(1&e){var c=s.cc();s.bc(0,"div",31),s.bc(1,"button",33),s.jc("click",(function(){s.Ic(c);var e=s.nc().$implicit;return s.nc().downloadreport(e,e.id)})),s.Qc(2," Download "),s.ac(),s.ac()}}function dt(e,t){1&e&&(s.bc(0,"div",31),s.bc(1,"button",34),s.Qc(2," PROCESSING.. "),s.ac(),s.ac())}function ut(e,t){if(1&e&&(s.bc(0,"tr"),s.Oc(1,ot,5,4,"td",19),s.bc(2,"td"),s.Oc(3,st,3,0,"div",29),s.Oc(4,lt,3,0,"div",29),s.Oc(5,dt,3,0,"div",29),s.ac(),s.ac()),2&e){var c=t.$implicit,i=s.nc();s.Ib(1),s.uc("ngForOf",i.cols),s.Ib(2),s.uc("ngIf","FAILED"==c.status),s.Ib(1),s.uc("ngIf","COMPLETED"==c.status),s.Ib(1),s.uc("ngIf","IN_PROGRESS"==c.status)}}function ft(e,t){if(1&e){var c=s.cc();s.bc(0,"div",35),s.jc("click",(function(){s.Ic(c);var e=t.$implicit;return s.nc().itemOnPage(e)})),s.Qc(1),s.ac()}if(2&e){var i=t.$implicit,r=s.nc();s.uc("ngClass",r.itemsPerPage==i?"item-number-active":"item-number"),s.Ib(1),s.Sc(" ",i," ")}}var bt,gt,vt,ht=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}},mt=[{path:"",data:{title:"Service Provider Configuration"},children:[{path:"revenue-share-config",component:Je,data:{title:"Revenue Share Configuration"}},{path:"add-revenue-share-config",component:q,data:{title:"Add Revenue Share Configuration"}},{path:"view-revenue-share-config/:id",component:ge,data:{title:"View Revenue Share Configuration"}},{path:"checker",component:be,data:{title:"Checker Revenue Share Configuration"}},{path:"audit-report",component:(bt=function(){function e(t,c,i,r,a){_classCallCheck(this,e),this.userService=t,this.transactionService=c,this.notificationService=i,this.excelService=r,this.serviceConfigurationService=a,this.storeList=[],this.filteredData=[],this.filterQueryStoreID="All",this.selected={startDate:Ze("00:00","HH:mm").subtract(7,"days"),endDate:Ze("23:59","HH:mm")},this.ranges={Today:[Ze().set("hours",0).set("minutes",0),Ze().set("hours",23).set("minutes",59)],"Last 7 Days":[Ze().subtract(6,"days"),Ze()],"Last 30 Days":[Ze().subtract(29,"days"),Ze()],"Last 3 Month":[Ze().subtract(3,"month").startOf("month"),Ze().subtract(1,"month").endOf("month")],"Last 6 Months":[Ze().subtract(6,"month").startOf("month"),Ze().subtract(1,"month").endOf("month")]},this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.page=1,this.entriesOnPage=[5,10,15,20],this.itemsPerPage=5,this.recordPerPage=100,this.offset=0,this.datas=[]}return _createClass(e,[{key:"showReports",value:function(){var e=this;if(!this.filterQueryStoreID)return this.notificationService.showInfo("Please select Store ID.","");this.filteredData=[];var t=Ze(this.selectedDateRange.startDate).unix(),c=Ze(this.selectedDateRange.endDate).unix(),i=Object.assign({fromDate:t,toDate:c,reportType:"AUDIT",merchantID:this.filterQueryStoreID,merchantType:this.userService.userValue.merchantType},"AGG"==this.userService.userValue.merchantType?{aggregatorID:this.userService.userValue.merchantId}:null);console.log(i),this.transactionService.generateReportsTransaction(i).subscribe((function(t){t.duplicateId==t.id&&null!=t.remarks?e.notificationService.showInfo("Report for specified date range is already generated.",""):e.getAllReports()})),setTimeout((function(){e.getAllReports()}),2e3)}},{key:"downloadreport",value:function(e,t){var c=this;if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[],this.transactionService.downloadReport(t,e.merchantID,"AGG"===this.userService.userValue.merchantType?this.userService.userValue.merchantId:null).subscribe((function(t){c.datas.push(t),new Date,c.excelService.downloadFile(c.datas,e.fileName)}))}},{key:"ngOnInit",value:function(){this.getDropdownVals(),this.loggedInUser=this.userService.userValue,this.selectedDateRange=this.selected,this.showReportsData=[],"AGG"===this.userService.userValue.merchantType&&(this.merchantId="ALL"),this.getAllReports()}},{key:"getAllReports",value:function(){var e=this,t={reportType:"AUDIT",merchantID:this.filterQueryStoreID,merchantType:this.userService.userValue.merchantType};this.transactionService.getReportsTransaction(t.reportType,t.merchantID,this.recordPerPage,this.offset,"AGG"===this.userService.userValue.merchantType?this.userService.userValue.merchantId:null).subscribe((function(t){e.showReportsData=t}))}},{key:"pageChanged",value:function(e){this.page=e}},{key:"itemOnPage",value:function(e){this.itemsPerPage=e}},{key:"selectMer",value:function(){this.getAllReports()}},{key:"getDropdownVals",value:function(){var e=this,t=[{label:"ALL",value:"",merchantId:"All"}];this.serviceConfigurationService.getStoreDropdown({merchantId:this.userService.userValue.merchantId}).subscribe((function(c){c&&(c.forEach((function(e){t.push({label:e.storeId+" - "+e.storeName,value:e.storeId,merchantId:e.merchantid})})),e.storeList=t)}))}}]),e}(),bt.\u0275fac=function(e){return new(e||bt)(s.Vb(u.a),s.Vb(Ke.a),s.Vb(b.a),s.Vb(Xe.a),s.Vb(f.a))},bt.\u0275cmp=s.Pb({type:bt,selectors:[["app-audit-report"]],decls:43,vars:24,consts:[[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-list-alt","ml-2",2,"font-weight","500"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","ngModel","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],[1,"col-md-3"],["bindLabel","label","appendTo","body","bindValue","merchantId",3,"items","searchable","ngModel","ngModelChange","change"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],[3,"ngSwitch"],[4,"ngSwitchDefault"],["class","col-md-1",4,"ngIf"],[4,"ngIf"],[1,"col-md-1"],[1,"btn","btn-sm","btn-danger","mt-4"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"div",4),s.bc(5,"div",5),s.Wb(6,"i",6),s.Qc(7,"AUDIT "),s.ac(),s.ac(),s.bc(8,"div",1),s.bc(9,"div",7),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"label"),s.Qc(13,"Duration"),s.ac(),s.bc(14,"input",10),s.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),s.ac(),s.Wb(15,"label",11),s.ac(),s.bc(16,"div",12),s.bc(17,"label"),s.Qc(18," Store ID "),s.ac(),s.bc(19,"ng-select",13),s.jc("ngModelChange",(function(e){return t.filterQueryStoreID=e}))("change",(function(){return t.selectMer()})),s.ac(),s.ac(),s.bc(20,"div",14),s.bc(21,"button",15),s.jc("click",(function(){return t.showReports()})),s.Qc(22," Generate Report "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(23,"div",16),s.bc(24,"div",17),s.bc(25,"table",18),s.bc(26,"thead"),s.bc(27,"tr"),s.Oc(28,ct,3,1,"th",19),s.ac(),s.ac(),s.bc(29,"tbody"),s.Oc(30,ut,6,4,"tr",19),s.oc(31,"paginate"),s.ac(),s.ac(),s.ac(),s.bc(32,"div",20),s.bc(33,"div",21),s.bc(34,"div",22),s.bc(35,"span",23),s.Qc(36," Show "),s.ac(),s.Oc(37,ft,2,2,"div",24),s.bc(38,"span",23),s.Qc(39," entries per page "),s.ac(),s.ac(),s.Wb(40,"div",25),s.bc(41,"div",25),s.bc(42,"pagination-controls",26),s.jc("pageChange",(function(e){return t.pageChanged(e)})),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&e&&(s.Ib(14),s.uc("dateLimit",90)("ngModel",t.selectedDateRange)("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!0)("timePicker24Hour",!0)("showClearButton",!1),s.Ib(5),s.uc("items",t.storeList)("searchable",!0)("ngModel",t.filterQueryStoreID),s.Ib(9),s.uc("ngForOf",t.cols),s.Ib(2),s.uc("ngForOf",s.qc(31,17,t.showReportsData,s.Ac(20,ht,t.itemsPerPage,t.page,t.showReportsData.length))),s.Ib(7),s.uc("ngForOf",t.entriesOnPage))},directives:[et.a,n.b,n.n,n.q,g.a,r.m,U.c,r.p,r.r,r.n,r.l],pipes:[U.b,r.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),bt),data:{title:"Audit report "}}]}],pt=((gt=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:gt}),gt.\u0275inj=s.Sb({factory:function(e){return new(e||gt)},imports:[[a.g.forChild(mt)],a.g]}),gt),It=c("FE24"),Dt=c("d2mR"),yt=((vt=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:vt}),vt.\u0275inj=s.Sb({factory:function(e){return new(e||vt)},providers:[j.b],imports:[[r.c,pt,U.a,Dt.a,It.c,n.i,et.b.forRoot(),d.b,h.c.forRoot(),j.d.forRoot(),n.i,n.v,g.b,v.b.forRoot()]]}),vt)}}]);
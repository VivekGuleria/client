(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{qUkX:function(e,t,c){"use strict";c.r(t),c.d(t,"ReportsModule",(function(){return Zc}));var a=c("SVse"),n=c("iInd"),i=c("wd/R"),s=c("orU0"),r=c("8Y7J"),o=c("id1S"),l=c("qfBg"),d=c("bpDJ"),u=c("OC8m"),h=c("7g+E"),b=c("kFe1"),m=c("s7LF"),p=c("xkgV"),g=c("q17e");function f(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const I=function(){return{standalone:!0}};function v(e,t){if(1&e){const e=r.cc();r.bc(0,"div",44),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",45),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,f,2,3,"option",46),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,I))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function D(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function y(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,48),r.Oc(2,D,2,1,"span",49),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function O(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function M(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function S(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function A(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}const C=function(){return{"background-color":"yellow"}};function w(e,t){if(1&e&&(r.bc(0,"td",52),r.Oc(1,O,2,1,"div",21),r.Oc(2,M,3,4,"div",21),r.Oc(3,S,3,4,"div",21),r.Oc(4,A,3,4,"div",21),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc(2);r.uc("ngStyle",a.duplicateID==c.id&&r.xc(5,C)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function R(e,t){1&e&&(r.bc(0,"button",55),r.Qc(1," FAILED "),r.ac())}const T=function(e){return[e]};function P(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,R,2,0,"button",54),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,T,e.roleAccess.viewReportsSettlementDownload))}}function L(e,t){if(1&e){const e=r.cc();r.bc(0,"button",57),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function x(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,L,2,0,"button",56),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,T,e.roleAccess.viewReportsSettlementDownload))}}function F(e,t){1&e&&(r.bc(0,"button",59),r.Qc(1," PROCESSING.. "),r.ac())}function k(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,F,2,0,"button",58),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,T,e.roleAccess.viewReportsSettlementDownload))}}function Q(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,w,5,6,"td",50),r.bc(2,"td"),r.Oc(3,P,2,3,"div",51),r.Oc(4,x,2,3,"div",51),r.Oc(5,k,2,3,"div",51),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc(2);r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}const V=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function G(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,Q,6,4,"tr",20),r.oc(2,"paginate"),r.ac()),2&e){const e=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,e.showReportsData,r.Ac(4,V,e.itemsPerPage,e.page,e.showReportsData.length)))}}function E(e,t){if(1&e){const e=r.cc();r.bc(0,"div",60),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}function $(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}function j(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}const U=function(){return{days:180}},N=function(){return{format:"DD/MM/YYYY"}};let _=(()=>{class e{constructor(e,t,c,a,n){this.transactionService=e,this.userservice=t,this.excelService=c,this.notificationService=a,this.spinner=n,this.reportStatus=!1,this.moreFilters={},this.filteredData=[],this.roleAccess=s.a,this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.selected={startDate:i().subtract(7,"days"),endDate:i()},this.recordPerPage=100,this.offset=0,this.dummyData=[{merchantID:"120352",reportType:"Transaction",fromDate:"11/26/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"12/22/2021",toDate:"02/27/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2022",toDate:"01/30/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/01/2022",toDate:"02/01/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"19/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/12/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"10/02/2022",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/12/2021",toDate:"12/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/02/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"}],this.itemsPerPage=5,this.page=1,this.entriesOnPage=[5,10,15,20],this.dummyValues=[{label:"All",value:"0"},{label:"One",value:"1"},{label:"Two",value:"2"},{label:"Three",value:"3"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"a-z"},{name:"Sort Z to A",value:"DESC",img:"z-a"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"a-z"},{name:"Sort 9 to 0",value:"DESC",img:"z-a"}],this.searchCriteria={},this.transactionStatus=[{label:"Success",value:"Success"},{label:"Reject",value:"Reject"},{label:"Request",value:"Request"}],this.ranges={Today:[i(),i()],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")]},this.datas=[]}showReports(){this.filteredData=[];const e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix();let c=Object.assign({fromDate:e,toDate:t,reportType:"SETTLEMENT",merchantID:this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,merchantType:this.userservice.userValue.merchantType},"AGG"==this.userservice.userValue.merchantType?{aggregatorID:this.userservice.userValue.merchantId}:null);console.log(c),this.transactionService.generateReportsTransaction(c).subscribe(e=>{e.duplicateId==e.id&&null!=e.remarks?(this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.",""),this.findReportPage(e)):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}ngOnInit(){this.loggedInUser=this.userservice.userValue,this.merchantName=this.userservice.userValue.merchantName,"AGG"===this.userservice.userValue.merchantType&&(this.merchantId="ALL"),this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.showReportsData=[],this.merchantID=this.userservice.userValue.merchantId,this.merchData=this.userservice.userValue.merchants,this.pushAll(),this.getAllReports(),this.selectedDateRange=this.selected}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""})}getAllReports(){const e=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,t="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;let c={reportType:"SETTLEMENT",merchantID:e,merchantType:this.userservice.userValue.merchantType};console.log(c),this.transactionService.getReportsTransaction(c.reportType,e,this.recordPerPage,this.offset,t).subscribe(e=>{this.showReportsData=e,console.log(e)})}pad2(e){return e<10?"0"+e:e}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),console.log(t);var c=new Date;c.getFullYear().toString(),this.pad2(c.getMonth()+1),this.pad2(c.getDate()),this.pad2(c.getHours()),this.pad2(c.getMinutes()),this.pad2(c.getSeconds()),this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}searchTransanction(){const e={};console.log("+++++++++date range ++++++++",this.selectedDateRange),Object.assign(e,this.searchCriteria,this.moreFilters,this.selectedDateRange),console.log(e)}reset(){this.searchCriteria={},this.selectedDateRange=null,this.moreFilters={}}pageChanged(e){this.page=e}itemOnPage(e){this.page=0,this.itemsPerPage=e}addMoreFilters(){this.searchTransanction()}close(){this.moreFilters={}}sortingClick(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.dummyData})}customSort(e){this.sortField.length>0&&(e.data&&e.data.sort((t,c)=>{let a=t[e.field],n=c[e.field],i=null;return i=null==a&&null!=n?-1:null!=a&&null==n?1:null==a&&null==n?0:"string"==typeof a&&"string"==typeof n?a.localeCompare(n):a<n?-1:a>n?1:0,e.order*i}),this.sortField="")}setSortOption(e,t){this.cols.forEach(c=>{e===c.field&&(c.sortOptions=t,this.selectedSortOption=t)})}getMerchantList(){this.transactionService.merchantList({merchantid:this.loggedInUser.merchantId}).subscribe(e=>{this.merchantList=e},e=>{console.log(e)})}selectMer(){this.getAllReports()}findReportPage(e){var t=this.showReportsData.map(e=>e.id).indexOf(e.id),c=parseInt(String(t/this.itemsPerPage));this.pageChanged(c+1)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(o.a),r.Vb(l.a),r.Vb(d.a),r.Vb(u.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-settlements"]],decls:79,vars:36,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-list-alt","ml-2",2,"font-weight","500"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","ngModel","locale","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],["class","col-md-2 ",4,"ngIf"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","pl-2","pr-2"],[1,"col-md-6","pl-2","pr-2","pt-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],[1,"p-3","pr-4",2,"text-align","right"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","ml-1",3,"click"],[1,"col-md-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-1",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-1"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"div",4),r.bc(6,"div",5),r.bc(7,"div",6),r.bc(8,"div",7),r.Wb(9,"i",8),r.Qc(10,"Settlement "),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"div",9),r.bc(13,"div",10),r.bc(14,"div",11),r.bc(15,"label"),r.Qc(16,"Duration"),r.ac(),r.bc(17,"input",12),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(18,"label",13),r.ac(),r.Oc(19,v,5,4,"div",14),r.bc(20,"div",15),r.bc(21,"button",16),r.jc("click",(function(){return t.showReports()})),r.Qc(22," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(23,"div",17),r.bc(24,"div",18),r.bc(25,"table",19),r.bc(26,"thead"),r.bc(27,"tr"),r.Oc(28,y,3,1,"th",20),r.ac(),r.ac(),r.Oc(29,G,3,8,"tbody",21),r.ac(),r.ac(),r.bc(30,"div",22),r.bc(31,"div",23),r.bc(32,"div",24),r.bc(33,"span",25),r.Qc(34," Show "),r.ac(),r.Oc(35,E,2,2,"div",26),r.bc(36,"span",25),r.Qc(37," entries per page "),r.ac(),r.ac(),r.Wb(38,"div",27),r.bc(39,"div",27),r.bc(40,"pagination-controls",28),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(41,"div",29),r.bc(42,"div",30),r.bc(43,"div",31),r.bc(44,"div",32),r.bc(45,"h5",33),r.Qc(46,"More Filters"),r.ac(),r.bc(47,"button",34),r.jc("click",(function(){return t.close()})),r.bc(48,"span",35),r.Qc(49,"\xd7"),r.ac(),r.ac(),r.ac(),r.bc(50,"div",36),r.bc(51,"div",37),r.bc(52,"div",38),r.bc(53,"label"),r.Qc(54," Recon Status "),r.ac(),r.bc(55,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.recon=e})),r.Oc(56,$,2,1,"option",20),r.ac(),r.ac(),r.bc(57,"div",38),r.bc(58,"label"),r.Qc(59," Transaction channel "),r.ac(),r.bc(60,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.txn=e})),r.Oc(61,j,2,1,"option",20),r.ac(),r.ac(),r.bc(62,"div",38),r.bc(63,"label"),r.Qc(64,"AddlParam1"),r.ac(),r.bc(65,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama1=e})),r.ac(),r.ac(),r.bc(66,"div",38),r.bc(67,"label"),r.Qc(68,"AddlParam2"),r.ac(),r.bc(69,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama2=e})),r.ac(),r.ac(),r.bc(70,"div",38),r.bc(71,"label"),r.Qc(72,"Merchant reference ID"),r.ac(),r.bc(73,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.refId=e})),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(74,"div",41),r.bc(75,"button",42),r.jc("click",(function(){return t.addMoreFilters()})),r.Qc(76,"Apply"),r.ac(),r.bc(77,"button",43),r.jc("click",(function(){return t.close()})),r.Qc(78,"Reset"),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(17),r.uc("dateLimit",r.xc(29,U))("ngModel",t.selectedDateRange)("locale",r.xc(30,N))("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!1)("timePicker24Hour",!0)("showClearButton",!1),r.Ib(2),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",0==t.filteredData.length),r.Ib(6),r.uc("ngForOf",t.entriesOnPage),r.Ib(20),r.uc("ngModelOptions",r.xc(31,I))("ngModel",t.moreFilters.recon),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(32,I))("ngModel",t.moreFilters.txn),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(33,I))("ngModel",t.moreFilters.addParama1),r.Ib(4),r.uc("ngModelOptions",r.xc(34,I))("ngModel",t.moreFilters.addParama2),r.Ib(4),r.uc("ngModelOptions",r.xc(35,I))("ngModel",t.moreFilters.refId))},directives:[h.a,b.a,m.b,m.n,m.q,a.n,a.m,p.c,m.x,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),e})();function B(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e),r.Ib(1),r.Rc(e)}}function q(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const H=function(){return{standalone:!0}};function z(e,t){if(1&e){const e=r.cc();r.bc(0,"div",14),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",48),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,q,2,3,"option",16),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,H))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function W(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e),r.Ib(1),r.Sc("",e," ")}}function Y(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function Z(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,49),r.Oc(2,Y,2,1,"span",50),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function J(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function X(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy h:mma"))}}function K(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy h:mma"))}}function ee(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy h:mma"))}}const te=function(){return{"background-color":"yellow"}},ce=function(){return{"background-color":"rgba(147, 231, 240, 0.8)"}};function ae(e,t){if(1&e&&(r.bc(0,"td",53),r.Oc(1,J,2,1,"div",25),r.Oc(2,X,3,4,"div",25),r.Oc(3,K,3,4,"div",25),r.Oc(4,ee,3,4,"div",25),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc(2);r.uc("ngStyle",a.duplicateID==c.id?r.xc(5,te):c.id==a.status&&r.xc(6,ce)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field&&"status"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function ne(e,t){1&e&&(r.bc(0,"button",56),r.Qc(1," FAILED "),r.ac())}function ie(e,t){1&e&&(r.bc(0,"button",56),r.Qc(1," FAILED "),r.ac())}const se=function(e){return[e]};function re(e,t){if(1&e&&(r.bc(0,"div",54),r.Oc(1,ne,2,0,"button",55),r.Oc(2,ie,2,0,"button",55),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(2,se,e.roleAccess.viewReportsTransactionDownload)),r.Ib(1),r.uc("appUserAccess",r.yc(4,se,e.roleAccess.viewSpTransactionReportsDownload))}}function oe(e,t){if(1&e){const e=r.cc();r.bc(0,"button",58),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function le(e,t){if(1&e){const e=r.cc();r.bc(0,"button",58),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function de(e,t){if(1&e&&(r.bc(0,"div",54),r.Oc(1,oe,2,0,"button",57),r.Oc(2,le,2,0,"button",57),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(2,se,e.roleAccess.viewReportsTransactionDownload)),r.Ib(1),r.uc("appUserAccess",r.yc(4,se,e.roleAccess.viewSpTransactionReportsDownload))}}function ue(e,t){1&e&&(r.bc(0,"button",60),r.Qc(1," PROCESSING.. "),r.ac())}function he(e,t){1&e&&(r.bc(0,"button",60),r.Qc(1," PROCESSING.. "),r.ac())}function be(e,t){if(1&e&&(r.bc(0,"div",54),r.Oc(1,ue,2,0,"button",59),r.Oc(2,he,2,0,"button",59),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(2,se,e.roleAccess.viewReportsTransactionDownload)),r.Ib(1),r.uc("appUserAccess",r.yc(4,se,e.roleAccess.viewSpTransactionReportsDownload))}}function me(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,ae,5,7,"td",51),r.bc(2,"td"),r.Oc(3,re,3,6,"div",52),r.Oc(4,de,3,6,"div",52),r.Oc(5,be,3,6,"div",52),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc(2);r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}const pe=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function ge(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,me,6,4,"tr",24),r.oc(2,"paginate"),r.ac()),2&e){const e=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,e.showReportsData,r.Ac(4,pe,e.itemsPerPage,e.page,e.showReportsData.length)))}}function fe(e,t){if(1&e){const e=r.cc();r.bc(0,"div",61),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}function Ie(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}function ve(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}const De=function(){return{days:180}},ye=function(){return{format:"DD/MM/YYYY"}};let Oe=(()=>{class e{constructor(e,t,c,a,n){this.transactionService=e,this.userservice=t,this.excelService=c,this.notificationService=a,this.spinner=n,this.reportStatus=!1,this.recordPerPage=100,this.offset=0,this.moreFilters={},this.filteredData=[],this.datas=[],this.roleAccess=s.a,this.statuss=["SUC","ALL","REQ","REJ"],this.defaultStatus="SUC",this.selected={startDate:i("00:00","HH:mm").subtract(7,"days"),endDate:i("23:59","HH:mm")},this.doHighlight=!1,this.isDisabeDropdown=!0,this.showTimepicker=!0,this.cutOverValues=["Business Date","Calendar Date"],this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.dummyData=[],this.itemsPerPage=5,this.page=1,this.entriesOnPage=[5,10,15,20],this.dummyValues=[{label:"All",value:"0"},{label:"One",value:"1"},{label:"Two",value:"2"},{label:"Three",value:"3"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"a-z"},{name:"Sort Z to A",value:"DESC",img:"z-a"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"a-z"},{name:"Sort 9 to 0",value:"DESC",img:"z-a"}],this.searchCriteria={},this.transactionStatus=[{label:"Success",value:"Success"},{label:"Reject",value:"Reject"},{label:"Request",value:"Request"}],this.ranges={Today:[i().set("hours",0).set("minutes",0),i().set("hours",23).set("minutes",59)],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")]}}showReports(){this.status="",this.duplicateID="",this.filteredData=[];let e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix(),c=i(this.selectedDateRange.startDate).format("HH:mm"),a=i(this.selectedDateRange.endDate).format("HH:mm"),n=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({fromDate:e,toDate:t,fromTime:c,toTime:a,reportType:"",merchantID:this.merchantId?this.merchantId:"AGG"===this.userservice.userValue.merchantType?"ALL":this.userservice.userValue.merchantId,transactionStatus:this.defaultStatus,merchantType:this.userservice.userValue.merchantType,dateType:this.searchCriteria.dateType},"AGG"==this.userservice.userValue.merchantType?{aggregatorID:this.userservice.userValue.merchantId}:null),"ALL"==this.merchantId||"SERVICE_PROVIDER"==this.userservice.userValue.userType?{merchantIds:this.userservice.userValue.merchantIds}:null),"ALL"!=this.merchantId&&"AGG"==this.userservice.userValue.merchantType?{merchantIds:[this.merchantId]}:null),"ALL"!=this.merchantId&&"MER"==this.userservice.userValue.merchantType?{merchantIds:[this.userservice.userValue.merchantId]}:null),"SERVICE_PROVIDER"==this.userservice.userValue.userType?{providerId:this.userservice.userValue.providerId}:null);n.reportType="SERVICE_PROVIDER"==this.userservice.userValue.userType?"S_PROVIDER_TRANSACTION":"TRANSACTION",this.transactionService.generateReportsTransaction(n).subscribe(e=>{console.log(e),e.duplicateId==e.id&&null!=e.remarks&&(this.doHighlight=!0,this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.",""),this.findReportPage(e)),e.differentStatus&&null!=e.duplicateId?(this.status=e.id,this.notificationService.showSuccess("Report updated successfully for new records !",""),this.findReportPage(e)):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}pad2(e){return e<10?"0"+e:e}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),new Date,this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}ngOnInit(){this.merchantID=this.userservice.userValue.merchantId,this.loggedInUser=this.userservice.userValue,this.merchantName=this.userservice.userValue.merchantName,this.selectedDateRange=this.selected,this.searchCriteria.dateType="Calendar Date",this.loggedInbussinessCutoverTime=this.userservice.userValue.businessCutOverTime,this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.showReportsData=[],this.merchData=this.userservice.userValue.merchants,this.checkDropdown(),this.pushAll(),"AGG"===this.userservice.userValue.merchantType&&(this.merchantId="ALL"),this.getAllReports()}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""}),console.log(this.merchData)}checkDropdown(){console.log(this.loggedInbussinessCutoverTime),this.isDisabeDropdown="00:00"==this.loggedInbussinessCutoverTime}changeTimepickerCondition(e){console.log(e.target.value),this.showTimepicker="Business Date"!=e.target.value}getAllReports(){const e=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,t="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;let c={reportType:"TRANSACTION",merchantID:e,merchantType:this.userservice.userValue.merchantType};c.reportType="SERVICE_PROVIDER"==this.userservice.userValue.userType?"S_PROVIDER_TRANSACTION":"TRANSACTION",this.transactionService.getReportsTransaction(c.reportType,e,this.recordPerPage,this.offset,t).subscribe(e=>{this.showReportsData=e})}searchTransanction(){Object.assign({},this.searchCriteria,this.moreFilters,this.selectedDateRange)}reset(){this.searchCriteria={},this.selectedDateRange=null,this.moreFilters={}}pageChanged(e){this.page=e}itemOnPage(e){this.itemsPerPage=e}addMoreFilters(){this.searchTransanction()}close(){this.moreFilters={}}sortingClick(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.filteredData})}customSort(e){this.sortField.length>0&&(e.data&&e.data.sort((t,c)=>{let a=t[e.field],n=c[e.field],i=null;return i=null==a&&null!=n?-1:null!=a&&null==n?1:null==a&&null==n?0:"string"==typeof a&&"string"==typeof n?a.localeCompare(n):a<n?-1:a>n?1:0,e.order*i}),this.sortField="")}setSortOption(e,t){this.cols.forEach(c=>{e===c.field&&(c.sortOptions=t,this.selectedSortOption=t)})}getMerchantList(){this.transactionService.merchantList({merchantid:this.loggedInUser.merchantId}).subscribe(e=>{this.merchantList=e},e=>{console.log(e)})}selectMer(){this.getAllReports()}findReportPage(e){var t=this.showReportsData.map(e=>e.id).indexOf(e.id),c=parseInt(String(t/this.itemsPerPage));this.pageChanged(c+1)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(o.a),r.Vb(l.a),r.Vb(d.a),r.Vb(u.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-transactions"]],decls:92,vars:44,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-exchange",2,"font-weight","700"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-4"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","locale","ngModel","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","showClearButton","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],[1,"col-md-2"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-2 ",4,"ngIf"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"disabled","ngModelOptions","ngModel","ngModelChange","change"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"float-right",3,"pageChange"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","pl-2","pr-2"],[1,"col-md-6","pl-2","pr-2","pt-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],[1,"p-3","pr-4",2,"text-align","right"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","ml-1",3,"click"],[3,"value"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-4"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"ngx-spinner",0),r.bc(4,"p",1),r.Qc(5,"Downloading..."),r.ac(),r.ac(),r.bc(6,"div",2),r.bc(7,"div",3),r.bc(8,"div",4),r.bc(9,"div",5),r.bc(10,"div",6),r.bc(11,"div",7),r.Wb(12,"i",8),r.Qc(13,"Transaction "),r.ac(),r.ac(),r.bc(14,"div",3),r.bc(15,"div",9),r.bc(16,"div",10),r.bc(17,"div",11),r.bc(18,"label"),r.Qc(19,"Duration"),r.ac(),r.bc(20,"input",12),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(21,"label",13),r.ac(),r.bc(22,"div",14),r.bc(23,"label"),r.Qc(24,"Status"),r.ac(),r.bc(25,"select",15),r.jc("ngModelChange",(function(e){return t.defaultStatus=e})),r.Oc(26,B,2,2,"option",16),r.ac(),r.ac(),r.Oc(27,z,5,4,"div",17),r.bc(28,"div",14),r.bc(29,"label"),r.Qc(30,"Cutover "),r.ac(),r.bc(31,"select",18),r.jc("ngModelChange",(function(e){return t.searchCriteria.dateType=e}))("change",(function(e){return t.changeTimepickerCondition(e)})),r.Oc(32,W,2,2,"option",16),r.ac(),r.ac(),r.bc(33,"div",19),r.bc(34,"button",20),r.jc("click",(function(){return t.showReports()})),r.Qc(35," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(36,"div",21),r.bc(37,"div",22),r.bc(38,"table",23),r.bc(39,"thead"),r.bc(40,"tr"),r.Oc(41,Z,3,1,"th",24),r.ac(),r.ac(),r.Oc(42,ge,3,8,"tbody",25),r.ac(),r.ac(),r.bc(43,"div",26),r.bc(44,"div",27),r.bc(45,"div",28),r.bc(46,"span",29),r.Qc(47," Show "),r.ac(),r.Oc(48,fe,2,2,"div",30),r.bc(49,"span",29),r.Qc(50," entries per page "),r.ac(),r.ac(),r.Wb(51,"div",11),r.bc(52,"div",11),r.bc(53,"pagination-controls",31),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(54,"div",32),r.bc(55,"div",33),r.bc(56,"div",34),r.bc(57,"div",35),r.bc(58,"h5",36),r.Qc(59,"More Filters"),r.ac(),r.bc(60,"button",37),r.jc("click",(function(){return t.close()})),r.bc(61,"span",38),r.Qc(62,"\xd7"),r.ac(),r.ac(),r.ac(),r.bc(63,"div",39),r.bc(64,"div",40),r.bc(65,"div",41),r.bc(66,"label"),r.Qc(67," Recon Status "),r.ac(),r.bc(68,"select",42),r.jc("ngModelChange",(function(e){return t.moreFilters.recon=e})),r.Oc(69,Ie,2,1,"option",24),r.ac(),r.ac(),r.bc(70,"div",41),r.bc(71,"label"),r.Qc(72," Transaction channel "),r.ac(),r.bc(73,"select",42),r.jc("ngModelChange",(function(e){return t.moreFilters.txn=e})),r.Oc(74,ve,2,1,"option",24),r.ac(),r.ac(),r.bc(75,"div",41),r.bc(76,"label"),r.Qc(77,"AddlParam1"),r.ac(),r.bc(78,"input",43),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama1=e})),r.ac(),r.ac(),r.bc(79,"div",41),r.bc(80,"label"),r.Qc(81,"AddlParam2"),r.ac(),r.bc(82,"input",43),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama2=e})),r.ac(),r.ac(),r.bc(83,"div",41),r.bc(84,"label"),r.Qc(85,"Merchant reference ID"),r.ac(),r.bc(86,"input",43),r.jc("ngModelChange",(function(e){return t.moreFilters.refId=e})),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(87,"div",44),r.bc(88,"button",45),r.jc("click",(function(){return t.addMoreFilters()})),r.Qc(89,"Apply"),r.ac(),r.bc(90,"button",46),r.jc("click",(function(){return t.close()})),r.Qc(91,"Reset"),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(3),r.uc("fullScreen",!0),r.Ib(17),r.uc("dateLimit",r.xc(36,De))("locale",r.xc(37,ye))("ngModel",t.selectedDateRange)("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("showClearButton",!1)("keepCalendarOpeningWithRange",!0)("timePicker",t.showTimepicker)("timePicker24Hour",!0),r.Ib(5),r.uc("ngModel",t.defaultStatus),r.Ib(1),r.uc("ngForOf",t.statuss),r.Ib(1),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(4),r.uc("disabled",t.isDisabeDropdown)("ngModelOptions",r.xc(38,H))("ngModel",t.searchCriteria.dateType),r.Ib(1),r.uc("ngForOf",t.cutOverValues),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",0==t.filteredData.length),r.Ib(6),r.uc("ngForOf",t.entriesOnPage),r.Ib(20),r.uc("ngModelOptions",r.xc(39,H))("ngModel",t.moreFilters.recon),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(40,H))("ngModel",t.moreFilters.txn),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(41,H))("ngModel",t.moreFilters.addParama1),r.Ib(4),r.uc("ngModelOptions",r.xc(42,H))("ngModel",t.moreFilters.addParama2),r.Ib(4),r.uc("ngModelOptions",r.xc(43,H))("ngModel",t.moreFilters.refId))},directives:[h.a,b.a,m.b,m.n,m.q,m.x,a.m,a.n,p.c,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}.card[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();function Me(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const Se=function(){return{standalone:!0}};function Ae(e,t){if(1&e){const e=r.cc();r.bc(0,"div",44),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",45),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,Me,2,3,"option",46),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,Se))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function Ce(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function we(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,48),r.Oc(2,Ce,2,1,"span",49),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function Re(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function Te(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function Pe(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function Le(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}const xe=function(){return{"background-color":"yellow"}};function Fe(e,t){if(1&e&&(r.bc(0,"td",52),r.Oc(1,Re,2,1,"div",21),r.Oc(2,Te,3,4,"div",21),r.Oc(3,Pe,3,4,"div",21),r.Oc(4,Le,3,4,"div",21),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc(2);r.uc("ngStyle",a.duplicateID==c.id&&r.xc(5,xe)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function ke(e,t){1&e&&(r.bc(0,"button",55),r.Qc(1," FAILED "),r.ac())}const Qe=function(e){return[e]};function Ve(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,ke,2,0,"button",54),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,Qe,e.roleAccess.viewSpTransferReportsDownload))}}function Ge(e,t){if(1&e){const e=r.cc();r.bc(0,"button",57),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function Ee(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,Ge,2,0,"button",56),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,Qe,e.roleAccess.viewSpTransferReportsDownload))}}function $e(e,t){1&e&&(r.bc(0,"button",59),r.Qc(1," PROCESSING.. "),r.ac())}function je(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,$e,2,0,"button",58),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,Qe,e.roleAccess.viewSpTransferReportsDownload))}}function Ue(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,Fe,5,6,"td",50),r.bc(2,"td"),r.Oc(3,Ve,2,3,"div",51),r.Oc(4,Ee,2,3,"div",51),r.Oc(5,je,2,3,"div",51),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc(2);r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}const Ne=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function _e(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,Ue,6,4,"tr",20),r.oc(2,"paginate"),r.ac()),2&e){const e=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,e.showReportsData,r.Ac(4,Ne,e.itemsPerPage,e.page,e.showReportsData.length)))}}function Be(e,t){if(1&e){const e=r.cc();r.bc(0,"div",60),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}function qe(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}function He(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}const ze=function(){return{days:180}},We=function(){return{format:"DD/MM/YYYY"}};let Ye=(()=>{class e{constructor(e,t,c,a,n){this.transactionService=e,this.userservice=t,this.excelService=c,this.notificationService=a,this.spinner=n,this.reportStatus=!1,this.moreFilters={},this.filteredData=[],this.roleAccess=s.a,this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.selected={startDate:i("00:00","HH:mm").subtract(7,"days"),endDate:i("23:59","HH:mm")},this.recordPerPage=100,this.offset=0,this.dummyData=[{merchantID:"120352",reportType:"Transaction",fromDate:"11/26/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"12/22/2021",toDate:"02/27/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2022",toDate:"01/30/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/01/2022",toDate:"02/01/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"19/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/12/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"10/02/2022",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/12/2021",toDate:"12/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/02/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"}],this.itemsPerPage=5,this.page=1,this.entriesOnPage=[5,10,15,20],this.dummyValues=[{label:"All",value:"0"},{label:"One",value:"1"},{label:"Two",value:"2"},{label:"Three",value:"3"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"a-z"},{name:"Sort Z to A",value:"DESC",img:"z-a"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"a-z"},{name:"Sort 9 to 0",value:"DESC",img:"z-a"}],this.searchCriteria={},this.transactionStatus=[{label:"Success",value:"Success"},{label:"Reject",value:"Reject"},{label:"Request",value:"Request"}],this.ranges={Today:[i().set("hours",0).set("minutes",0),i().set("hours",23).set("minutes",59)],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")]},this.datas=[]}showReports(){this.filteredData=[];const e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix();let c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({fromDate:e,toDate:t,reportType:"TRANSFERS",merchantID:this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,merchantType:this.userservice.userValue.merchantType},"AGG"==this.userservice.userValue.merchantType?{aggregatorID:this.userservice.userValue.merchantId}:null),"ALL"==this.merchantId&&"SERVICE_PROVIDER"==this.userservice.userValue.userType?{merchantIds:this.userservice.userValue.merchantIds}:null),"ALL"!=this.merchantId&&"SERVICE_PROVIDER"==this.userservice.userValue.userType?{merchantIds:[this.merchantId]}:null),"ALL"!=this.merchantId&&"AGG"==this.userservice.userValue.merchantType?{merchantIds:[this.merchantId]}:null),"ALL"!=this.merchantId&&"MER"==this.userservice.userValue.merchantType?{merchantIds:[this.userservice.userValue.merchantId]}:null),"SERVICE_PROVIDER"==this.userservice.userValue.userType?{providerId:this.userservice.userValue.providerId}:null);console.log(c),this.transactionService.generateReportsTransaction(c).subscribe(e=>{e.duplicateId==e.id&&null!=e.remarks?(this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.",""),this.findReportPage(e)):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}ngOnInit(){this.loggedInUser=this.userservice.userValue,this.merchantName=this.userservice.userValue.merchantName,"AGG"===this.userservice.userValue.merchantType&&(this.merchantId="ALL"),this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.showReportsData=[],this.merchantID=this.userservice.userValue.merchantId,this.merchData=this.userservice.userValue.merchants,this.pushAll(),this.selectedDateRange=this.selected,this.getAllReports()}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""})}getAllReports(){const e=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,t="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;let c={reportType:"TRANSFERS",merchantID:e,merchantType:this.userservice.userValue.merchantType};console.log(c),this.transactionService.getReportsTransaction(c.reportType,e,this.recordPerPage,this.offset,t).subscribe(e=>{this.showReportsData=e,console.log(e)})}pad2(e){return e<10?"0"+e:e}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),console.log(t);var c=new Date;c.getFullYear().toString(),this.pad2(c.getMonth()+1),this.pad2(c.getDate()),this.pad2(c.getHours()),this.pad2(c.getMinutes()),this.pad2(c.getSeconds()),this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}searchTransanction(){const e={};console.log("+++++++++date range ++++++++",this.selectedDateRange),Object.assign(e,this.searchCriteria,this.moreFilters,this.selectedDateRange),console.log(e)}reset(){this.searchCriteria={},this.selectedDateRange=null,this.moreFilters={}}pageChanged(e){this.page=e}itemOnPage(e){this.page=0,this.itemsPerPage=e}addMoreFilters(){this.searchTransanction()}close(){this.moreFilters={}}sortingClick(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.dummyData})}customSort(e){this.sortField.length>0&&(e.data&&e.data.sort((t,c)=>{let a=t[e.field],n=c[e.field],i=null;return i=null==a&&null!=n?-1:null!=a&&null==n?1:null==a&&null==n?0:"string"==typeof a&&"string"==typeof n?a.localeCompare(n):a<n?-1:a>n?1:0,e.order*i}),this.sortField="")}setSortOption(e,t){this.cols.forEach(c=>{e===c.field&&(c.sortOptions=t,this.selectedSortOption=t)})}getMerchantList(){this.transactionService.merchantList({merchantid:this.loggedInUser.merchantId}).subscribe(e=>{this.merchantList=e},e=>{console.log(e)})}selectMer(){this.getAllReports()}findReportPage(e){var t=this.showReportsData.map(e=>e.id).indexOf(e.id),c=parseInt(String(t/this.itemsPerPage));this.pageChanged(c+1)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(o.a),r.Vb(l.a),r.Vb(d.a),r.Vb(u.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-transfer-reports"]],decls:79,vars:36,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-list-alt","ml-2",2,"font-weight","500"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","locale","ngModel","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],["class","col-md-2 ",4,"ngIf"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","pl-2","pr-2"],[1,"col-md-6","pl-2","pr-2","pt-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],[1,"p-3","pr-4",2,"text-align","right"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","ml-1",3,"click"],[1,"col-md-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-1",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-1"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"div",4),r.bc(6,"div",5),r.bc(7,"div",6),r.bc(8,"div",7),r.Wb(9,"i",8),r.Qc(10,"TRANSFER "),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"div",9),r.bc(13,"div",10),r.bc(14,"div",11),r.bc(15,"label"),r.Qc(16,"Duration"),r.ac(),r.bc(17,"input",12),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(18,"label",13),r.ac(),r.Oc(19,Ae,5,4,"div",14),r.bc(20,"div",15),r.bc(21,"button",16),r.jc("click",(function(){return t.showReports()})),r.Qc(22," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(23,"div",17),r.bc(24,"div",18),r.bc(25,"table",19),r.bc(26,"thead"),r.bc(27,"tr"),r.Oc(28,we,3,1,"th",20),r.ac(),r.ac(),r.Oc(29,_e,3,8,"tbody",21),r.ac(),r.ac(),r.bc(30,"div",22),r.bc(31,"div",23),r.bc(32,"div",24),r.bc(33,"span",25),r.Qc(34," Show "),r.ac(),r.Oc(35,Be,2,2,"div",26),r.bc(36,"span",25),r.Qc(37," entries per page "),r.ac(),r.ac(),r.Wb(38,"div",27),r.bc(39,"div",27),r.bc(40,"pagination-controls",28),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(41,"div",29),r.bc(42,"div",30),r.bc(43,"div",31),r.bc(44,"div",32),r.bc(45,"h5",33),r.Qc(46,"More Filters"),r.ac(),r.bc(47,"button",34),r.jc("click",(function(){return t.close()})),r.bc(48,"span",35),r.Qc(49,"\xd7"),r.ac(),r.ac(),r.ac(),r.bc(50,"div",36),r.bc(51,"div",37),r.bc(52,"div",38),r.bc(53,"label"),r.Qc(54," Recon Status "),r.ac(),r.bc(55,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.recon=e})),r.Oc(56,qe,2,1,"option",20),r.ac(),r.ac(),r.bc(57,"div",38),r.bc(58,"label"),r.Qc(59," Transaction channel "),r.ac(),r.bc(60,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.txn=e})),r.Oc(61,He,2,1,"option",20),r.ac(),r.ac(),r.bc(62,"div",38),r.bc(63,"label"),r.Qc(64,"AddlParam1"),r.ac(),r.bc(65,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama1=e})),r.ac(),r.ac(),r.bc(66,"div",38),r.bc(67,"label"),r.Qc(68,"AddlParam2"),r.ac(),r.bc(69,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama2=e})),r.ac(),r.ac(),r.bc(70,"div",38),r.bc(71,"label"),r.Qc(72,"Merchant reference ID"),r.ac(),r.bc(73,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.refId=e})),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(74,"div",41),r.bc(75,"button",42),r.jc("click",(function(){return t.addMoreFilters()})),r.Qc(76,"Apply"),r.ac(),r.bc(77,"button",43),r.jc("click",(function(){return t.close()})),r.Qc(78,"Reset"),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(17),r.uc("dateLimit",r.xc(29,ze))("locale",r.xc(30,We))("ngModel",t.selectedDateRange)("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!0)("timePicker24Hour",!0)("showClearButton",!1),r.Ib(2),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",0==t.filteredData.length),r.Ib(6),r.uc("ngForOf",t.entriesOnPage),r.Ib(20),r.uc("ngModelOptions",r.xc(31,Se))("ngModel",t.moreFilters.recon),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(32,Se))("ngModel",t.moreFilters.txn),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(33,Se))("ngModel",t.moreFilters.addParama1),r.Ib(4),r.uc("ngModelOptions",r.xc(34,Se))("ngModel",t.moreFilters.addParama2),r.Ib(4),r.uc("ngModelOptions",r.xc(35,Se))("ngModel",t.moreFilters.refId))},directives:[h.a,b.a,m.b,m.n,m.q,a.n,a.m,p.c,m.x,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),e})();var Ze=c("VHTt");function Je(e,t){if(1&e&&(r.bc(0,"option",31),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e),r.Ib(1),r.Rc(e)}}function Xe(e,t){if(1&e&&(r.bc(0,"option",31),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const Ke=function(){return{standalone:!0}};function et(e,t){if(1&e){const e=r.cc();r.bc(0,"div",14),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",32),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,Xe,2,3,"option",16),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,Ke))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function tt(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function ct(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,33),r.Oc(2,tt,2,1,"span",34),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function at(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function nt(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy h:mma"))}}function it(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy h:mma"))}}function st(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy h:mma"))}}const rt=function(){return{"background-color":"yellow"}},ot=function(){return{"background-color":"rgba(147, 231, 240, 0.8)"}};function lt(e,t){if(1&e&&(r.bc(0,"td",37),r.Oc(1,at,2,1,"div",38),r.Oc(2,nt,3,4,"div",38),r.Oc(3,it,3,4,"div",38),r.Oc(4,st,3,4,"div",38),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc();r.uc("ngStyle",a.duplicateID==c.id?r.xc(5,rt):c.id==a.status&&r.xc(6,ot)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field&&"status"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function dt(e,t){1&e&&(r.bc(0,"button",41),r.Qc(1," FAILED "),r.ac())}const ut=function(e){return[e]};function ht(e,t){if(1&e&&(r.bc(0,"div",39),r.Oc(1,dt,2,0,"button",40),r.ac()),2&e){const e=r.nc(2);r.Ib(1),r.uc("appUserAccess",r.yc(1,ut,e.roleAccess.viewInvoiceReportDownload))}}function bt(e,t){if(1&e){const e=r.cc();r.bc(0,"button",43),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc().downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function mt(e,t){if(1&e&&(r.bc(0,"div",39),r.Oc(1,bt,2,0,"button",42),r.ac()),2&e){const e=r.nc(2);r.Ib(1),r.uc("appUserAccess",r.yc(1,ut,e.roleAccess.viewInvoiceReportDownload))}}function pt(e,t){1&e&&(r.bc(0,"button",45),r.Qc(1," PROCESSING.. "),r.ac())}function gt(e,t){if(1&e&&(r.bc(0,"div",39),r.Oc(1,pt,2,0,"button",44),r.ac()),2&e){const e=r.nc(2);r.Ib(1),r.uc("appUserAccess",r.yc(1,ut,e.roleAccess.viewInvoiceReportDownload))}}function ft(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,lt,5,7,"td",35),r.bc(2,"td"),r.Oc(3,ht,2,3,"div",36),r.Oc(4,mt,2,3,"div",36),r.Oc(5,gt,2,3,"div",36),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc();r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}function It(e,t){if(1&e){const e=r.cc();r.bc(0,"div",46),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}const vt=function(){return{days:180}},Dt=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};let yt=(()=>{class e{constructor(e,t,c,a,n){this.userService=e,this.transactionService=t,this.notificationService=c,this.excelService=a,this.spinner=n,this.filteredData=[],this.statuss=["NEW","SUC","INI","FAI","CLOSED","ALL"],this.defaultStatus="SUC",this.roleAccess=Ze.a,this.selected={startDate:i("00:00","HH:mm").subtract(7,"days"),endDate:i("23:59","HH:mm")},this.ranges={Today:[i().set("hours",0).set("minutes",0),i().set("hours",23).set("minutes",59)],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")]},this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.page=1,this.entriesOnPage=[5,10,15,20],this.itemsPerPage=5,this.recordPerPage=100,this.offset=0,this.datas=[]}showReports(){this.status="",this.duplicateID="",this.filteredData=[];let e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix();i(this.selectedDateRange.startDate).format("HH:mm"),i(this.selectedDateRange.endDate).format("HH:mm");let c=Object.assign(Object.assign(Object.assign(Object.assign({fromDate:e,toDate:t,reportType:"INVOICE",merchantID:this.merchantId?this.merchantId:"AGG"===this.userService.userValue.merchantType?"ALL":this.userService.userValue.merchantId,transactionStatus:this.defaultStatus,merchantType:this.userService.userValue.merchantType},"AGG"==this.userService.userValue.merchantType?{aggregatorID:this.userService.userValue.merchantId}:null),"ALL"==this.merchantId?{merchantIds:this.userService.userValue.merchantIds}:null),"ALL"!=this.merchantId?{merchantIds:[this.merchantId]}:null),"ALL"!=this.merchantId&&"MER"==this.userService.userValue.merchantType?{merchantIds:[this.userService.userValue.merchantId]}:null);console.log(c),this.transactionService.generateReportsTransaction(c).subscribe(e=>{e.duplicateId==e.id&&null!=e.remarks&&(this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.",""),this.findReportPage(e)),e.differentStatus&&null!=e.duplicateId?(this.status=e.id,this.notificationService.showSuccess("Report updated successfully for new records !",""),this.findReportPage(e)):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userService.userValue.merchantType?this.userService.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),new Date,this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}ngOnInit(){this.loggedInUser=this.userService.userValue,this.selectedDateRange=this.selected,this.merchData=this.userService.userValue.merchants,this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.mID=this.userService.userValue.merchantId,this.showReportsData=[],this.pushAll(),"AGG"===this.userService.userValue.merchantType&&(this.merchantId="ALL"),this.getAllReports()}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""})}getAllReports(){this.transactionService.getReportsTransaction("INVOICE",this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,this.recordPerPage,this.offset,"AGG"===this.userService.userValue.merchantType?this.userService.userValue.merchantId:null).subscribe(e=>{this.showReportsData=e})}pageChanged(e){this.page=e,console.log(e)}itemOnPage(e){this.itemsPerPage=e}selectMer(){}findReportPage(e){var t=this.showReportsData.map(e=>e.id).indexOf(e.id),c=parseInt(String(t/this.itemsPerPage));this.pageChanged(c+1)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(l.a),r.Vb(o.a),r.Vb(u.a),r.Vb(d.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-invoice"]],decls:48,vars:26,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-list-alt","ml-2",2,"font-weight","500"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar;-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","ngModel","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],[1,"col-md-2"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-2 ",4,"ngIf"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],[3,"value"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[4,"ngIf"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-4"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"div",4),r.bc(6,"div",5),r.bc(7,"div",6),r.bc(8,"div",7),r.Wb(9,"i",8),r.Qc(10,"INVOICE "),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"div",9),r.bc(13,"div",10),r.bc(14,"div",11),r.bc(15,"label"),r.Qc(16,"Duration"),r.ac(),r.bc(17,"input",12),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(18,"label",13),r.ac(),r.bc(19,"div",14),r.bc(20,"label"),r.Qc(21,"Status"),r.ac(),r.bc(22,"select",15),r.jc("ngModelChange",(function(e){return t.defaultStatus=e})),r.Oc(23,Je,2,2,"option",16),r.ac(),r.ac(),r.Oc(24,et,5,4,"div",17),r.bc(25,"div",18),r.bc(26,"button",19),r.jc("click",(function(){return t.showReports()})),r.Qc(27," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(28,"div",20),r.bc(29,"div",21),r.bc(30,"table",22),r.bc(31,"thead"),r.bc(32,"tr"),r.Oc(33,ct,3,1,"th",23),r.ac(),r.ac(),r.bc(34,"tbody"),r.Oc(35,ft,6,4,"tr",23),r.oc(36,"paginate"),r.ac(),r.ac(),r.ac(),r.bc(37,"div",24),r.bc(38,"div",25),r.bc(39,"div",26),r.bc(40,"span",27),r.Qc(41," Show "),r.ac(),r.Oc(42,It,2,2,"div",28),r.bc(43,"span",27),r.Qc(44," entries per page "),r.ac(),r.ac(),r.Wb(45,"div",29),r.bc(46,"div",29),r.bc(47,"pagination-controls",30),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(17),r.uc("dateLimit",r.xc(21,vt))("ngModel",t.selectedDateRange)("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!0)("timePicker24Hour",!0)("showClearButton",!1),r.Ib(5),r.uc("ngModel",t.defaultStatus),r.Ib(1),r.uc("ngForOf",t.statuss),r.Ib(1),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(2),r.uc("ngForOf",r.qc(36,18,t.showReportsData,r.Ac(22,Dt,t.itemsPerPage,t.page,t.showReportsData.length))),r.Ib(7),r.uc("ngForOf",t.entriesOnPage))},directives:[h.a,b.a,m.b,m.n,m.q,m.x,a.m,a.n,p.c,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),e})();function Ot(e,t){1&e&&(r.bc(0,"div",43),r.Wb(1,"i",44),r.Qc(2,"Detailed Settlement "),r.ac())}function Mt(e,t){1&e&&(r.bc(0,"div",43),r.Wb(1,"i",44),r.Qc(2,"Settlement "),r.ac())}function St(e,t){if(1&e&&(r.bc(0,"option",48),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const At=function(){return{standalone:!0}};function Ct(e,t){if(1&e){const e=r.cc();r.bc(0,"div",45),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",46),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,St,2,3,"option",47),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,At))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function wt(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function Rt(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,49),r.Oc(2,wt,2,1,"span",50),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function Tt(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function Pt(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function Lt(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function xt(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}const Ft=function(){return{"background-color":"yellow"}};function kt(e,t){if(1&e&&(r.bc(0,"td",53),r.Oc(1,Tt,2,1,"div",20),r.Oc(2,Pt,3,4,"div",20),r.Oc(3,Lt,3,4,"div",20),r.Oc(4,xt,3,4,"div",20),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc(2);r.uc("ngStyle",a.duplicateID==c.id&&r.xc(5,Ft)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function Qt(e,t){1&e&&(r.bc(0,"button",56),r.Qc(1," FAILED "),r.ac())}const Vt=function(e){return[e]};function Gt(e,t){if(1&e&&(r.bc(0,"div",54),r.Oc(1,Qt,2,0,"button",55),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,Vt,e.roleAccess.viewReportsSettlementDownload))}}function Et(e,t){if(1&e){const e=r.cc();r.bc(0,"button",58),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function $t(e,t){if(1&e&&(r.bc(0,"div",54),r.Oc(1,Et,2,0,"button",57),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,Vt,e.roleAccess.viewReportsSettlementDownload))}}function jt(e,t){1&e&&(r.bc(0,"button",60),r.Qc(1," PROCESSING.. "),r.ac())}function Ut(e,t){if(1&e&&(r.bc(0,"div",54),r.Oc(1,jt,2,0,"button",59),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,Vt,e.roleAccess.viewReportsSettlementDownload))}}function Nt(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,kt,5,6,"td",51),r.bc(2,"td"),r.Oc(3,Gt,2,3,"div",52),r.Oc(4,$t,2,3,"div",52),r.Oc(5,Ut,2,3,"div",52),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc(2);r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}const _t=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function Bt(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,Nt,6,4,"tr",19),r.oc(2,"paginate"),r.ac()),2&e){const e=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,e.showReportsData,r.Ac(4,_t,e.itemsPerPage,e.page,e.showReportsData.length)))}}function qt(e,t){if(1&e){const e=r.cc();r.bc(0,"div",61),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}function Ht(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}function zt(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}const Wt=function(){return{format:"DD/MM/YYYY"}};function Yt(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const Zt=function(){return{standalone:!0}};function Jt(e,t){if(1&e){const e=r.cc();r.bc(0,"div",44),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",45),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,Yt,2,3,"option",46),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,Zt))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function Xt(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function Kt(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,48),r.Oc(2,Xt,2,1,"span",49),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function ec(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function tc(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function cc(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function ac(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}const nc=function(){return{"background-color":"yellow"}};function ic(e,t){if(1&e&&(r.bc(0,"td",52),r.Oc(1,ec,2,1,"div",21),r.Oc(2,tc,3,4,"div",21),r.Oc(3,cc,3,4,"div",21),r.Oc(4,ac,3,4,"div",21),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc(2);r.uc("ngStyle",a.duplicateID==c.id&&r.xc(5,nc)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function sc(e,t){1&e&&(r.bc(0,"button",55),r.Qc(1," FAILED "),r.ac())}const rc=function(e){return[e]};function oc(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,sc,2,0,"button",54),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,rc,e.roleAccess.viewReportsSettlementDownload))}}function lc(e,t){if(1&e){const e=r.cc();r.bc(0,"button",57),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function dc(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,lc,2,0,"button",56),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,rc,e.roleAccess.viewReportsSettlementDownload))}}function uc(e,t){1&e&&(r.bc(0,"button",59),r.Qc(1," PROCESSING.. "),r.ac())}function hc(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,uc,2,0,"button",58),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,rc,e.roleAccess.viewReportsSettlementDownload))}}function bc(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,ic,5,6,"td",50),r.bc(2,"td"),r.Oc(3,oc,2,3,"div",51),r.Oc(4,dc,2,3,"div",51),r.Oc(5,hc,2,3,"div",51),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc(2);r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}const mc=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function pc(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,bc,6,4,"tr",20),r.oc(2,"paginate"),r.ac()),2&e){const e=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,e.showReportsData,r.Ac(4,mc,e.itemsPerPage,e.page,e.showReportsData.length)))}}function gc(e,t){if(1&e){const e=r.cc();r.bc(0,"div",60),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}function fc(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}function Ic(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}const vc=function(){return{format:"DD/MM/YYYY"}};function Dc(e,t){if(1&e&&(r.bc(0,"option",47),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Ib(1),r.Tc("",e.id," ",e.name," ")}}const yc=function(){return{standalone:!0}};function Oc(e,t){if(1&e){const e=r.cc();r.bc(0,"div",44),r.bc(1,"label"),r.Qc(2,"Merchant ID"),r.ac(),r.bc(3,"select",45),r.jc("ngModelChange",(function(t){return r.Ic(e),r.nc().merchantId=t}))("change",(function(){return r.Ic(e),r.nc().selectMer()})),r.Oc(4,Dc,2,3,"option",46),r.ac(),r.ac()}if(2&e){const e=r.nc();r.Ib(3),r.uc("ngModelOptions",r.xc(3,yc))("ngModel",e.merchantId),r.Ib(1),r.uc("ngForOf",e.merchData)}}function Mc(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit;r.Ib(1),r.Sc(" ",e.label," \xa0 ")}}function Sc(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,48),r.Oc(2,Mc,2,1,"span",49),r.Yb(),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.uc("ngSwitch",e.field)}}function Ac(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Rc(t[e.field])}}function Cc(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function wc(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}function Rc(e,t){if(1&e&&(r.bc(0,"div"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){const e=r.nc().$implicit,t=r.nc().$implicit;r.Ib(1),r.Sc("",r.qc(2,1,1e3*t[e.field],"dd/MM/yyyy")," ")}}const Tc=function(){return{"background-color":"yellow"}};function Pc(e,t){if(1&e&&(r.bc(0,"td",52),r.Oc(1,Ac,2,1,"div",21),r.Oc(2,Cc,3,4,"div",21),r.Oc(3,wc,3,4,"div",21),r.Oc(4,Rc,3,4,"div",21),r.ac()),2&e){const e=t.$implicit,c=r.nc().$implicit,a=r.nc(2);r.uc("ngStyle",a.duplicateID==c.id&&r.xc(5,Tc)),r.Ib(1),r.uc("ngIf","fromDate"!=e.field&&"toDate"!=e.field&&"createdAt"!=e.field),r.Ib(1),r.uc("ngIf","fromDate"==e.field),r.Ib(1),r.uc("ngIf","toDate"==e.field),r.Ib(1),r.uc("ngIf","createdAt"==e.field)}}function Lc(e,t){1&e&&(r.bc(0,"button",55),r.Qc(1," FAILED "),r.ac())}const xc=function(e){return[e]};function Fc(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,Lc,2,0,"button",54),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,xc,e.roleAccess.viewReportsSettlementDownload))}}function kc(e,t){if(1&e){const e=r.cc();r.bc(0,"button",57),r.jc("click",(function(){r.Ic(e);const t=r.nc(2).$implicit;return r.nc(2).downloadreport(t,t.id)})),r.Qc(1," Download "),r.ac()}}function Qc(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,kc,2,0,"button",56),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,xc,e.roleAccess.viewReportsSettlementDownload))}}function Vc(e,t){1&e&&(r.bc(0,"button",59),r.Qc(1," PROCESSING.. "),r.ac())}function Gc(e,t){if(1&e&&(r.bc(0,"div",53),r.Oc(1,Vc,2,0,"button",58),r.ac()),2&e){const e=r.nc(3);r.Ib(1),r.uc("appUserAccess",r.yc(1,xc,e.roleAccess.viewReportsSettlementDownload))}}function Ec(e,t){if(1&e&&(r.bc(0,"tr"),r.Oc(1,Pc,5,6,"td",50),r.bc(2,"td"),r.Oc(3,Fc,2,3,"div",51),r.Oc(4,Qc,2,3,"div",51),r.Oc(5,Gc,2,3,"div",51),r.ac(),r.ac()),2&e){const e=t.$implicit,c=r.nc(2);r.Ib(1),r.uc("ngForOf",c.cols),r.Ib(2),r.uc("ngIf","FAILED"==e.status),r.Ib(1),r.uc("ngIf","COMPLETED"==e.status),r.Ib(1),r.uc("ngIf","IN_PROGRESS"==e.status)}}const $c=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function jc(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,Ec,6,4,"tr",20),r.oc(2,"paginate"),r.ac()),2&e){const e=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,e.showReportsData,r.Ac(4,$c,e.itemsPerPage,e.page,e.showReportsData.length)))}}function Uc(e,t){if(1&e){const e=r.cc();r.bc(0,"div",60),r.jc("click",(function(){r.Ic(e);const c=t.$implicit;return r.nc().itemOnPage(c)})),r.Qc(1),r.ac()}if(2&e){const e=t.$implicit,c=r.nc();r.uc("ngClass",c.itemsPerPage==e?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",e," ")}}function Nc(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}function _c(e,t){if(1&e&&(r.bc(0,"option"),r.Qc(1),r.ac()),2&e){const e=t.$implicit;r.Ib(1),r.Rc(e.label)}}const Bc=function(){return{format:"DD/MM/YYYY"}},qc=[{path:"",data:{title:"reports"},children:[{path:"",redirectTo:"transactions"},{path:"transactions",component:Oe,data:{title:"transactions"}},{path:"settlement",component:_,data:{title:"settlement"}},{path:"detail-settlement",component:(()=>{class e{constructor(e,t,c,a,n){this.transactionService=e,this.userservice=t,this.excelService=c,this.notificationService=a,this.spinner=n,this.reportStatus=!1,this.moreFilters={},this.filteredData=[],this.roleAccess=s.a,this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.selected={startDate:i().subtract(7,"days"),endDate:i()},this.recordPerPage=100,this.offset=0,this.dummyData=[{merchantID:"120352",reportType:"Transaction",fromDate:"11/26/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"12/22/2021",toDate:"02/27/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2022",toDate:"01/30/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/01/2022",toDate:"02/01/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"19/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/12/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"10/02/2022",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/12/2021",toDate:"12/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/02/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"}],this.itemsPerPage=5,this.page=1,this.entriesOnPage=[5,10,15,20],this.isBial=!1,this.dummyValues=[{label:"All",value:"0"},{label:"One",value:"1"},{label:"Two",value:"2"},{label:"Three",value:"3"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"a-z"},{name:"Sort Z to A",value:"DESC",img:"z-a"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"a-z"},{name:"Sort 9 to 0",value:"DESC",img:"z-a"}],this.searchCriteria={},this.transactionStatus=[{label:"Success",value:"Success"},{label:"Reject",value:"Reject"},{label:"Request",value:"Request"}],this.ranges={Today:[i(),i()],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")]},this.datas=[]}showReports(){this.filteredData=[];const e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix();let c=Object.assign({fromDate:e,toDate:t,reportType:"DETAILED_SETTLEMENT",merchantID:this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,merchantType:this.userservice.userValue.merchantType},"AGG"==this.userservice.userValue.merchantType?{aggregatorID:this.userservice.userValue.merchantId}:null);console.log(c),this.transactionService.generateReportsTransaction(c).subscribe(e=>{e.duplicateId==e.id&&null!=e.remarks?(this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.","")):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}ngOnInit(){this.loggedInUser=this.userservice.userValue,this.merchantName=this.userservice.userValue.merchantName,this.isBial=this.userservice.userValue.bial,this.isSplitMerchant=this.userservice.userValue.splitSettlementFlag,"AGG"===this.userservice.userValue.merchantType&&(this.merchantId="ALL"),this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.showReportsData=[],this.merchantID=this.userservice.userValue.merchantId,this.merchData=this.userservice.userValue.merchants,this.pushAll(),this.getAllReports(),this.selectedDateRange=this.selected}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""})}getAllReports(){const e=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,t="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;let c={reportType:"DETAILED_SETTLEMENT",merchantID:e,merchantType:this.userservice.userValue.merchantType};console.log(c),this.transactionService.getReportsTransaction(c.reportType,e,this.recordPerPage,this.offset,t).subscribe(e=>{this.showReportsData=e,console.log(e)})}pad2(e){return e<10?"0"+e:e}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),console.log(t);var c=new Date;c.getFullYear().toString(),this.pad2(c.getMonth()+1),this.pad2(c.getDate()),this.pad2(c.getHours()),this.pad2(c.getMinutes()),this.pad2(c.getSeconds()),this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}searchTransanction(){const e={};console.log("+++++++++date range ++++++++",this.selectedDateRange),Object.assign(e,this.searchCriteria,this.moreFilters,this.selectedDateRange),console.log(e)}reset(){this.searchCriteria={},this.selectedDateRange=null,this.moreFilters={}}pageChanged(e){this.page=e}itemOnPage(e){this.page=0,this.itemsPerPage=e}addMoreFilters(){this.searchTransanction()}close(){this.moreFilters={}}sortingClick(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.dummyData})}customSort(e){this.sortField.length>0&&(e.data&&e.data.sort((t,c)=>{let a=t[e.field],n=c[e.field],i=null;return i=null==a&&null!=n?-1:null!=a&&null==n?1:null==a&&null==n?0:"string"==typeof a&&"string"==typeof n?a.localeCompare(n):a<n?-1:a>n?1:0,e.order*i}),this.sortField="")}setSortOption(e,t){this.cols.forEach(c=>{e===c.field&&(c.sortOptions=t,this.selectedSortOption=t)})}getMerchantList(){this.transactionService.merchantList({merchantid:this.loggedInUser.merchantId}).subscribe(e=>{this.merchantList=e},e=>{console.log(e)})}selectMer(){this.getAllReports()}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(o.a),r.Vb(l.a),r.Vb(d.a),r.Vb(u.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-detailed-settlement"]],decls:78,vars:37,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],["class","col-md-12  card-header","style","font-weight: 700;",4,"ngIf"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","ngModel","locale","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],["class","col-md-2 ",4,"ngIf"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","pl-2","pr-2"],[1,"col-md-6","pl-2","pr-2","pt-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],[1,"p-3","pr-4",2,"text-align","right"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","ml-1",3,"click"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-list-alt","ml-2",2,"font-weight","500"],[1,"col-md-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-1",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-1"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"div",4),r.bc(6,"div",5),r.bc(7,"div",6),r.Oc(8,Ot,3,0,"div",7),r.Oc(9,Mt,3,0,"div",7),r.ac(),r.bc(10,"div",3),r.bc(11,"div",8),r.bc(12,"div",9),r.bc(13,"div",10),r.bc(14,"label"),r.Qc(15,"Duration"),r.ac(),r.bc(16,"input",11),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(17,"label",12),r.ac(),r.Oc(18,Ct,5,4,"div",13),r.bc(19,"div",14),r.bc(20,"button",15),r.jc("click",(function(){return t.showReports()})),r.Qc(21," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(22,"div",16),r.bc(23,"div",17),r.bc(24,"table",18),r.bc(25,"thead"),r.bc(26,"tr"),r.Oc(27,Rt,3,1,"th",19),r.ac(),r.ac(),r.Oc(28,Bt,3,8,"tbody",20),r.ac(),r.ac(),r.bc(29,"div",21),r.bc(30,"div",22),r.bc(31,"div",23),r.bc(32,"span",24),r.Qc(33," Show "),r.ac(),r.Oc(34,qt,2,2,"div",25),r.bc(35,"span",24),r.Qc(36," entries per page "),r.ac(),r.ac(),r.Wb(37,"div",26),r.bc(38,"div",26),r.bc(39,"pagination-controls",27),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(40,"div",28),r.bc(41,"div",29),r.bc(42,"div",30),r.bc(43,"div",31),r.bc(44,"h5",32),r.Qc(45,"More Filters"),r.ac(),r.bc(46,"button",33),r.jc("click",(function(){return t.close()})),r.bc(47,"span",34),r.Qc(48,"\xd7"),r.ac(),r.ac(),r.ac(),r.bc(49,"div",35),r.bc(50,"div",36),r.bc(51,"div",37),r.bc(52,"label"),r.Qc(53," Recon Status "),r.ac(),r.bc(54,"select",38),r.jc("ngModelChange",(function(e){return t.moreFilters.recon=e})),r.Oc(55,Ht,2,1,"option",19),r.ac(),r.ac(),r.bc(56,"div",37),r.bc(57,"label"),r.Qc(58," Transaction channel "),r.ac(),r.bc(59,"select",38),r.jc("ngModelChange",(function(e){return t.moreFilters.txn=e})),r.Oc(60,zt,2,1,"option",19),r.ac(),r.ac(),r.bc(61,"div",37),r.bc(62,"label"),r.Qc(63,"AddlParam1"),r.ac(),r.bc(64,"input",39),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama1=e})),r.ac(),r.ac(),r.bc(65,"div",37),r.bc(66,"label"),r.Qc(67,"AddlParam2"),r.ac(),r.bc(68,"input",39),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama2=e})),r.ac(),r.ac(),r.bc(69,"div",37),r.bc(70,"label"),r.Qc(71,"Merchant reference ID"),r.ac(),r.bc(72,"input",39),r.jc("ngModelChange",(function(e){return t.moreFilters.refId=e})),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(73,"div",40),r.bc(74,"button",41),r.jc("click",(function(){return t.addMoreFilters()})),r.Qc(75,"Apply"),r.ac(),r.bc(76,"button",42),r.jc("click",(function(){return t.close()})),r.Qc(77,"Reset"),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(8),r.uc("ngIf",!t.isBial),r.Ib(1),r.uc("ngIf",t.isBial),r.Ib(7),r.uc("dateLimit",90)("ngModel",t.selectedDateRange)("locale",r.xc(31,Wt))("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!1)("timePicker24Hour",!0)("showClearButton",!1),r.Ib(2),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",0==t.filteredData.length),r.Ib(6),r.uc("ngForOf",t.entriesOnPage),r.Ib(20),r.uc("ngModelOptions",r.xc(32,At))("ngModel",t.moreFilters.recon),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(33,At))("ngModel",t.moreFilters.txn),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(34,At))("ngModel",t.moreFilters.addParama1),r.Ib(4),r.uc("ngModelOptions",r.xc(35,At))("ngModel",t.moreFilters.addParama2),r.Ib(4),r.uc("ngModelOptions",r.xc(36,At))("ngModel",t.moreFilters.refId))},directives:[h.a,a.n,b.a,m.b,m.n,m.q,a.m,p.c,m.x,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),e})(),data:{title:"detial settlement"}},{path:"transfer",component:Ye,data:{title:"transfer"}},{path:"invoice-report",component:yt,data:{title:"invoice"}},{path:"ledger-report",component:(()=>{class e{constructor(e,t,c,a,n){this.transactionService=e,this.userservice=t,this.excelService=c,this.notificationService=a,this.spinner=n,this.reportStatus=!1,this.moreFilters={},this.filteredData=[],this.roleAccess=s.a,this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.selected={startDate:i().subtract(7,"days"),endDate:i()},this.recordPerPage=100,this.offset=0,this.dummyData=[{merchantID:"120352",reportType:"Transaction",fromDate:"11/26/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"12/22/2021",toDate:"02/27/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2022",toDate:"01/30/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/01/2022",toDate:"02/01/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"19/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/12/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"10/02/2022",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/12/2021",toDate:"12/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/02/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"}],this.itemsPerPage=5,this.page=1,this.entriesOnPage=[5,10,15,20],this.dummyValues=[{label:"All",value:"0"},{label:"One",value:"1"},{label:"Two",value:"2"},{label:"Three",value:"3"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"a-z"},{name:"Sort Z to A",value:"DESC",img:"z-a"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"a-z"},{name:"Sort 9 to 0",value:"DESC",img:"z-a"}],this.searchCriteria={},this.transactionStatus=[{label:"Success",value:"Success"},{label:"Reject",value:"Reject"},{label:"Request",value:"Request"}],this.ranges={Today:[i(),i()],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")],"Last 6 Months":[i().subtract(6,"month").startOf("month"),i().subtract(1,"month").endOf("month")]},this.datas=[]}showReports(){this.filteredData=[];const e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix();let c=Object.assign({fromDate:e,toDate:t,reportType:"MERCHANT_LEDGER",merchantID:this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,merchantType:this.userservice.userValue.merchantType},"AGG"==this.userservice.userValue.merchantType?{aggregatorID:this.userservice.userValue.merchantId}:null);console.log(c),this.transactionService.generateReportsTransaction(c).subscribe(e=>{e.duplicateId==e.id&&null!=e.remarks?(this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.","")):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}ngOnInit(){this.loggedInUser=this.userservice.userValue,this.merchantName=this.userservice.userValue.merchantName,"AGG"===this.userservice.userValue.merchantType&&(this.merchantId="ALL"),this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.showReportsData=[],this.merchantID=this.userservice.userValue.merchantId,this.merchData=this.userservice.userValue.merchants,this.pushAll(),this.getAllReports(),this.selectedDateRange=this.selected}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""})}getAllReports(){const e=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,t="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;let c={reportType:"MERCHANT_LEDGER",merchantID:e,merchantType:this.userservice.userValue.merchantType};console.log(c),this.transactionService.getReportsTransaction(c.reportType,e,this.recordPerPage,this.offset,t).subscribe(e=>{this.showReportsData=e,console.log(e)})}pad2(e){return e<10?"0"+e:e}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),console.log(t);var c=new Date;c.getFullYear().toString(),this.pad2(c.getMonth()+1),this.pad2(c.getDate()),this.pad2(c.getHours()),this.pad2(c.getMinutes()),this.pad2(c.getSeconds()),this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}searchTransanction(){const e={};console.log("+++++++++date range ++++++++",this.selectedDateRange),Object.assign(e,this.searchCriteria,this.moreFilters,this.selectedDateRange),console.log(e)}reset(){this.searchCriteria={},this.selectedDateRange=null,this.moreFilters={}}pageChanged(e){this.page=e}itemOnPage(e){this.page=0,this.itemsPerPage=e}addMoreFilters(){this.searchTransanction()}close(){this.moreFilters={}}sortingClick(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.dummyData})}customSort(e){this.sortField.length>0&&(e.data&&e.data.sort((t,c)=>{let a=t[e.field],n=c[e.field],i=null;return i=null==a&&null!=n?-1:null!=a&&null==n?1:null==a&&null==n?0:"string"==typeof a&&"string"==typeof n?a.localeCompare(n):a<n?-1:a>n?1:0,e.order*i}),this.sortField="")}setSortOption(e,t){this.cols.forEach(c=>{e===c.field&&(c.sortOptions=t,this.selectedSortOption=t)})}getMerchantList(){this.transactionService.merchantList({merchantid:this.loggedInUser.merchantId}).subscribe(e=>{this.merchantList=e},e=>{console.log(e)})}selectMer(){this.getAllReports()}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(o.a),r.Vb(l.a),r.Vb(d.a),r.Vb(u.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-ledger-report"]],decls:79,vars:35,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-address-card","ml-2",2,"font-weight","500"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","ngModel","locale","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],["class","col-md-2 ",4,"ngIf"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","pl-2","pr-2"],[1,"col-md-6","pl-2","pr-2","pt-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],[1,"p-3","pr-4",2,"text-align","right"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","ml-1",3,"click"],[1,"col-md-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-1",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-1"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"div",4),r.bc(6,"div",5),r.bc(7,"div",6),r.bc(8,"div",7),r.Wb(9,"i",8),r.Qc(10,"Ledger "),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"div",9),r.bc(13,"div",10),r.bc(14,"div",11),r.bc(15,"label"),r.Qc(16,"Duration"),r.ac(),r.bc(17,"input",12),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(18,"label",13),r.ac(),r.Oc(19,Jt,5,4,"div",14),r.bc(20,"div",15),r.bc(21,"button",16),r.jc("click",(function(){return t.showReports()})),r.Qc(22," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(23,"div",17),r.bc(24,"div",18),r.bc(25,"table",19),r.bc(26,"thead"),r.bc(27,"tr"),r.Oc(28,Kt,3,1,"th",20),r.ac(),r.ac(),r.Oc(29,pc,3,8,"tbody",21),r.ac(),r.ac(),r.bc(30,"div",22),r.bc(31,"div",23),r.bc(32,"div",24),r.bc(33,"span",25),r.Qc(34," Show "),r.ac(),r.Oc(35,gc,2,2,"div",26),r.bc(36,"span",25),r.Qc(37," entries per page "),r.ac(),r.ac(),r.Wb(38,"div",27),r.bc(39,"div",27),r.bc(40,"pagination-controls",28),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(41,"div",29),r.bc(42,"div",30),r.bc(43,"div",31),r.bc(44,"div",32),r.bc(45,"h5",33),r.Qc(46,"More Filters"),r.ac(),r.bc(47,"button",34),r.jc("click",(function(){return t.close()})),r.bc(48,"span",35),r.Qc(49,"\xd7"),r.ac(),r.ac(),r.ac(),r.bc(50,"div",36),r.bc(51,"div",37),r.bc(52,"div",38),r.bc(53,"label"),r.Qc(54," Recon Status "),r.ac(),r.bc(55,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.recon=e})),r.Oc(56,fc,2,1,"option",20),r.ac(),r.ac(),r.bc(57,"div",38),r.bc(58,"label"),r.Qc(59," Transaction channel "),r.ac(),r.bc(60,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.txn=e})),r.Oc(61,Ic,2,1,"option",20),r.ac(),r.ac(),r.bc(62,"div",38),r.bc(63,"label"),r.Qc(64,"AddlParam1"),r.ac(),r.bc(65,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama1=e})),r.ac(),r.ac(),r.bc(66,"div",38),r.bc(67,"label"),r.Qc(68,"AddlParam2"),r.ac(),r.bc(69,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama2=e})),r.ac(),r.ac(),r.bc(70,"div",38),r.bc(71,"label"),r.Qc(72,"Merchant reference ID"),r.ac(),r.bc(73,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.refId=e})),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(74,"div",41),r.bc(75,"button",42),r.jc("click",(function(){return t.addMoreFilters()})),r.Qc(76,"Apply"),r.ac(),r.bc(77,"button",43),r.jc("click",(function(){return t.close()})),r.Qc(78,"Reset"),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(17),r.uc("dateLimit",90)("ngModel",t.selectedDateRange)("locale",r.xc(29,vc))("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!1)("timePicker24Hour",!0)("showClearButton",!1),r.Ib(2),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",0==t.filteredData.length),r.Ib(6),r.uc("ngForOf",t.entriesOnPage),r.Ib(20),r.uc("ngModelOptions",r.xc(30,Zt))("ngModel",t.moreFilters.recon),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(31,Zt))("ngModel",t.moreFilters.txn),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(32,Zt))("ngModel",t.moreFilters.addParama1),r.Ib(4),r.uc("ngModelOptions",r.xc(33,Zt))("ngModel",t.moreFilters.addParama2),r.Ib(4),r.uc("ngModelOptions",r.xc(34,Zt))("ngModel",t.moreFilters.refId))},directives:[h.a,b.a,m.b,m.n,m.q,a.n,a.m,p.c,m.x,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),e})(),data:{title:"ledger"}},{path:"topup-report",component:(()=>{class e{constructor(e,t,c,a,n){this.transactionService=e,this.userservice=t,this.excelService=c,this.notificationService=a,this.spinner=n,this.reportStatus=!1,this.moreFilters={},this.filteredData=[],this.roleAccess=s.a,this.cols=[{label:"From Date",field:"fromDate",sortOptions:"",sort:"number"},{label:"To Date",field:"toDate",sortOptions:"",sort:"number"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"Created By",field:"createdBy",sortOptions:"",sort:"text"}],this.selected={startDate:i().subtract(7,"days"),endDate:i()},this.recordPerPage=100,this.offset=0,this.dummyData=[{merchantID:"120352",reportType:"Transaction",fromDate:"11/26/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"12/22/2021",toDate:"02/27/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2022",toDate:"01/30/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/01/2022",toDate:"02/01/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"19/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/02/2021",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/12/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"10/02/2022",toDate:"02/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"11/12/2021",toDate:"12/02/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"},{merchantID:"120352",reportType:"Transaction",fromDate:"01/02/2021",toDate:"02/22/2022",status:"abcfed",fileLocation:"abcfed/location",fileName:"testing",createdAt:"10/02/2022",createdBy:"abcd"}],this.itemsPerPage=5,this.page=1,this.entriesOnPage=[5,10,15,20],this.dummyValues=[{label:"All",value:"0"},{label:"One",value:"1"},{label:"Two",value:"2"},{label:"Three",value:"3"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"a-z"},{name:"Sort Z to A",value:"DESC",img:"z-a"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"a-z"},{name:"Sort 9 to 0",value:"DESC",img:"z-a"}],this.searchCriteria={},this.transactionStatus=[{label:"Success",value:"Success"},{label:"Reject",value:"Reject"},{label:"Request",value:"Request"}],this.ranges={Today:[i(),i()],"Last 7 Days":[i().subtract(6,"days"),i()],"Last 30 Days":[i().subtract(29,"days"),i()],"Last 3 Month":[i().subtract(3,"month").startOf("month"),i().subtract(1,"month").endOf("month")],"Last 6 Months":[i().subtract(6,"month").startOf("month"),i().subtract(1,"month").endOf("month")]},this.datas=[]}showReports(){this.filteredData=[];const e=i(this.selectedDateRange.startDate).unix(),t=i(this.selectedDateRange.endDate).unix();let c=Object.assign({fromDate:e,toDate:t,reportType:"MERCHANT_TOP_UP_STATEMENT",merchantID:this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,merchantType:this.userservice.userValue.merchantType},"AGG"==this.userservice.userValue.merchantType?{aggregatorID:this.userservice.userValue.merchantId}:null);console.log(c),this.transactionService.generateReportsTransaction(c).subscribe(e=>{e.duplicateId==e.id&&null!=e.remarks?(this.duplicateID=e.id,this.notificationService.showInfo("Report for specified date range is already generated.","")):this.getAllReports()}),setTimeout(()=>{this.getAllReports()},2e3)}ngOnInit(){this.loggedInUser=this.userservice.userValue,this.merchantName=this.userservice.userValue.merchantName,"AGG"===this.userservice.userValue.merchantType&&(this.merchantId="ALL"),this.merchantIds=["ALL"].concat(this.loggedInUser.merchantIds),this.showReportsData=[],this.merchantID=this.userservice.userValue.merchantId,this.merchData=this.userservice.userValue.merchants,this.pushAll(),this.getAllReports(),this.selectedDateRange=this.selected}pushAll(){"ALL"!=this.merchData[0].id&&this.merchData.unshift({id:"ALL",name:""})}getAllReports(){const e=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,t="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;let c={reportType:"MERCHANT_TOP_UP_STATEMENT",merchantID:e,merchantType:this.userservice.userValue.merchantType};console.log(c),this.transactionService.getReportsTransaction(c.reportType,e,this.recordPerPage,this.offset,t).subscribe(e=>{this.showReportsData=e,console.log(e)})}pad2(e){return e<10?"0"+e:e}downloadreport(e,t){if(null==e.count)return this.notificationService.showInfo("Data is not available","");this.datas=[];const c=this.merchantId?this.merchantId:"AGG"===this.loggedInUser.merchantType?"ALL":this.loggedInUser.merchantId,a="AGG"===this.userservice.userValue.merchantType?this.userservice.userValue.merchantId:null;this.spinner.show(),this.transactionService.downloadReport(t,c,a).subscribe(t=>{this.datas.push(t),console.log(t);var c=new Date;c.getFullYear().toString(),this.pad2(c.getMonth()+1),this.pad2(c.getDate()),this.pad2(c.getHours()),this.pad2(c.getMinutes()),this.pad2(c.getSeconds()),this.excelService.downloadFile(this.datas,e.fileName),this.spinner.hide()},e=>{this.spinner.hide(),400==e.status&&this.notificationService.showError("Report not found !","")})}searchTransanction(){const e={};console.log("+++++++++date range ++++++++",this.selectedDateRange),Object.assign(e,this.searchCriteria,this.moreFilters,this.selectedDateRange),console.log(e)}reset(){this.searchCriteria={},this.selectedDateRange=null,this.moreFilters={}}pageChanged(e){this.page=e}itemOnPage(e){this.page=0,this.itemsPerPage=e}addMoreFilters(){this.searchTransanction()}close(){this.moreFilters={}}sortingClick(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.dummyData})}customSort(e){this.sortField.length>0&&(e.data&&e.data.sort((t,c)=>{let a=t[e.field],n=c[e.field],i=null;return i=null==a&&null!=n?-1:null!=a&&null==n?1:null==a&&null==n?0:"string"==typeof a&&"string"==typeof n?a.localeCompare(n):a<n?-1:a>n?1:0,e.order*i}),this.sortField="")}setSortOption(e,t){this.cols.forEach(c=>{e===c.field&&(c.sortOptions=t,this.selectedSortOption=t)})}getMerchantList(){this.transactionService.merchantList({merchantid:this.loggedInUser.merchantId}).subscribe(e=>{this.merchantList=e},e=>{console.log(e)})}selectMer(){this.getAllReports()}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(o.a),r.Vb(l.a),r.Vb(d.a),r.Vb(u.a),r.Vb(h.c))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-top-up"]],decls:79,vars:35,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-fade",3,"fullScreen"],[2,"color","white"],[1,"container-fluid","p-0",2,"min-height","80vh"],[1,"row"],[1,"card","mt-3"],[1,"card-body",2,"padding-top","0","padding-left","15px","padding-right","15px"],[1,"row","mb-2"],[1,"col-md-12","card-header",2,"font-weight","700"],[1,"fa","fa-file-text-o","ml-2",2,"font-weight","500"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-5"],["id","calendar-input","type","text","ngxDaterangepickerMd","",1,"form-control",3,"dateLimit","ngModel","locale","autoApply","showCustomRangeLabel","alwaysShowCalendars","ranges","linkedCalendars","keepCalendarOpeningWithRange","timePicker","timePicker24Hour","showClearButton","ngModelChange"],["id","icon","for","calendar-input",1,"date-range-picker-icon","fa","fa-calendar"],["class","col-md-2 ",4,"ngIf"],[1,"col-md-2","mt-2"],[1,"btn","btn-sm","btn-primary","mt-4",3,"click"],[1,"card"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"row","col-md-12",2,"float","left"],[1,"col-md-4","d-inline-flex"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"float-right",3,"pageChange"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","pl-2","pr-2"],[1,"col-md-6","pl-2","pr-2","pt-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],[1,"p-3","pr-4",2,"text-align","right"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","ml-1",3,"click"],[1,"col-md-2"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"ngStyle",4,"ngFor","ngForOf"],["class","col-md-1",4,"ngIf"],[3,"ngStyle"],[1,"col-md-1"],["class","btn btn-sm btn-danger mt-1",4,"appUserAccess"],[1,"btn","btn-sm","btn-danger","mt-1"],["class","btn btn-sm btn-primary mt-1",3,"click",4,"appUserAccess"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],["class","btn btn-sm btn-info mt-4",4,"appUserAccess"],[1,"btn","btn-sm","btn-info","mt-4"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.bc(0,"ngx-spinner",0),r.bc(1,"p",1),r.Qc(2,"Downloading..."),r.ac(),r.ac(),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"div",4),r.bc(6,"div",5),r.bc(7,"div",6),r.bc(8,"div",7),r.Wb(9,"i",8),r.Qc(10,"Topup "),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"div",9),r.bc(13,"div",10),r.bc(14,"div",11),r.bc(15,"label"),r.Qc(16,"Duration"),r.ac(),r.bc(17,"input",12),r.jc("ngModelChange",(function(e){return t.selectedDateRange=e})),r.ac(),r.Wb(18,"label",13),r.ac(),r.Oc(19,Oc,5,4,"div",14),r.bc(20,"div",15),r.bc(21,"button",16),r.jc("click",(function(){return t.showReports()})),r.Qc(22," Generate Report "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(23,"div",17),r.bc(24,"div",18),r.bc(25,"table",19),r.bc(26,"thead"),r.bc(27,"tr"),r.Oc(28,Sc,3,1,"th",20),r.ac(),r.ac(),r.Oc(29,jc,3,8,"tbody",21),r.ac(),r.ac(),r.bc(30,"div",22),r.bc(31,"div",23),r.bc(32,"div",24),r.bc(33,"span",25),r.Qc(34," Show "),r.ac(),r.Oc(35,Uc,2,2,"div",26),r.bc(36,"span",25),r.Qc(37," entries per page "),r.ac(),r.ac(),r.Wb(38,"div",27),r.bc(39,"div",27),r.bc(40,"pagination-controls",28),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(41,"div",29),r.bc(42,"div",30),r.bc(43,"div",31),r.bc(44,"div",32),r.bc(45,"h5",33),r.Qc(46,"More Filters"),r.ac(),r.bc(47,"button",34),r.jc("click",(function(){return t.close()})),r.bc(48,"span",35),r.Qc(49,"\xd7"),r.ac(),r.ac(),r.ac(),r.bc(50,"div",36),r.bc(51,"div",37),r.bc(52,"div",38),r.bc(53,"label"),r.Qc(54," Recon Status "),r.ac(),r.bc(55,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.recon=e})),r.Oc(56,Nc,2,1,"option",20),r.ac(),r.ac(),r.bc(57,"div",38),r.bc(58,"label"),r.Qc(59," Transaction channel "),r.ac(),r.bc(60,"select",39),r.jc("ngModelChange",(function(e){return t.moreFilters.txn=e})),r.Oc(61,_c,2,1,"option",20),r.ac(),r.ac(),r.bc(62,"div",38),r.bc(63,"label"),r.Qc(64,"AddlParam1"),r.ac(),r.bc(65,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama1=e})),r.ac(),r.ac(),r.bc(66,"div",38),r.bc(67,"label"),r.Qc(68,"AddlParam2"),r.ac(),r.bc(69,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.addParama2=e})),r.ac(),r.ac(),r.bc(70,"div",38),r.bc(71,"label"),r.Qc(72,"Merchant reference ID"),r.ac(),r.bc(73,"input",40),r.jc("ngModelChange",(function(e){return t.moreFilters.refId=e})),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(74,"div",41),r.bc(75,"button",42),r.jc("click",(function(){return t.addMoreFilters()})),r.Qc(76,"Apply"),r.ac(),r.bc(77,"button",43),r.jc("click",(function(){return t.close()})),r.Qc(78,"Reset"),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.uc("fullScreen",!0),r.Ib(17),r.uc("dateLimit",90)("ngModel",t.selectedDateRange)("locale",r.xc(29,Bc))("autoApply",!1)("showCustomRangeLabel",!1)("alwaysShowCalendars",!0)("ranges",t.ranges)("linkedCalendars",!0)("keepCalendarOpeningWithRange",!0)("timePicker",!1)("timePicker24Hour",!0)("showClearButton",!1),r.Ib(2),r.uc("ngIf","AGG"===t.loggedInUser.merchantType),r.Ib(9),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",0==t.filteredData.length),r.Ib(6),r.uc("ngForOf",t.entriesOnPage),r.Ib(20),r.uc("ngModelOptions",r.xc(30,yc))("ngModel",t.moreFilters.recon),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(31,yc))("ngModel",t.moreFilters.txn),r.Ib(1),r.uc("ngForOf",t.dummyValues),r.Ib(4),r.uc("ngModelOptions",r.xc(32,yc))("ngModel",t.moreFilters.addParama1),r.Ib(4),r.uc("ngModelOptions",r.xc(33,yc))("ngModel",t.moreFilters.addParama2),r.Ib(4),r.uc("ngModelOptions",r.xc(34,yc))("ngModel",t.moreFilters.refId))},directives:[h.a,b.a,m.b,m.n,m.q,a.n,a.m,p.c,m.x,m.r,m.z,a.p,a.r,a.o,g.a,a.l],pipes:[p.b,a.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}th[_ngcontent-%COMP%]{border-top:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:0}.show-data[_ngcontent-%COMP%]{overflow-x:scroll}  .md-drppicker{width:600px!important}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{float:right;margin-top:-24px;font-size:17px;padding-right:8px}"]}),e})(),data:{title:"ledger"}}]}];let Hc=(()=>{class e{}return e.\u0275mod=r.Tb({type:e}),e.\u0275inj=r.Sb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(qc)],n.g]}),e})();var zc=c("FE24"),Wc=c("GtQl"),Yc=c("d2mR");let Zc=(()=>{class e{}return e.\u0275mod=r.Tb({type:e}),e.\u0275inj=r.Sb({factory:function(t){return new(t||e)},imports:[[a.c,Hc,p.a,zc.c,m.i,b.b.forRoot(),Wc.a,Yc.a,h.b]]}),e})()}}]);
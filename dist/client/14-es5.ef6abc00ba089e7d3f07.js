function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var a=t[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"26d3":function(e,t,c){"use strict";c.r(t),c.d(t,"BatchModule",(function(){return X}));var a,n=c("SVse"),i=c("iInd"),o=c("Iab2"),r=c("8Y7J"),l=c("AytR"),s=c("IheW"),d=c("qfBg"),u=((a=function(){function e(t,c){var a=this;_classCallCheck(this,e),this.http=t,this.userService=c,this.baseUrl=l.a.url,this.http.get("assets/config/config.prod.json").subscribe((function(e){a.userService.changeUrl(e)}))}return _createClass(e,[{key:"batchUpload",value:function(e,t){var c=new FormData;return c.append("file",e),c.append("uploadedBy",t.uploadedBy),c.append("merchantID",t.merchantID),c.append("merchantType",t.merchantType),this.http.post(this.userService.urlValue.url+"/api/batch/upload",c)}},{key:"getUploadList",value:function(e){return this.http.post(this.userService.urlValue.url+"/api/batch/batch-list",e)}},{key:"getRejectedRecords",value:function(e){return console.log(e),this.http.post(this.userService.urlValue.url+"/api/batch/batch-reject-report",e,{responseType:"text"})}}]),e}()).\u0275fac=function(e){return new(e||a)(r.fc(s.b),r.fc(d.a))},a.\u0275prov=r.Rb({token:a,factory:a.\u0275fac,providedIn:"root"}),a);function b(e,t){if(1&e&&(r.bc(0,"label"),r.Qc(1),r.ac()),2&e){var c=r.nc().$implicit;r.Kb(c.lclass),r.Ib(1),r.Sc("",c.label," :")}}function p(e,t){if(1&e&&(r.bc(0,"label"),r.Qc(1),r.ac()),2&e){var c=r.nc().$implicit,a=r.nc(2);r.Kb(null==c?null:c.vclass),r.Ib(1),r.Rc(a.batchDetails[c.key])}}function f(e,t){if(1&e&&(r.bc(0,"label"),r.Qc(1),r.ac()),2&e){var c=r.nc().$implicit;r.Kb(null==c?null:c.lclass),r.Ib(1),r.Sc("",c.label," : ")}}function h(e,t){if(1&e&&(r.bc(0,"label"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){var c=r.nc().$implicit,a=r.nc(2);r.Kb(null==c?null:c.vclass),r.Ib(1),r.Rc(r.qc(2,4,a.batchDetails[c.key],"dd/MM/yyyy h:mma"))}}function g(e,t){if(1&e&&(r.bc(0,"li"),r.Oc(1,b,2,4,"label",17),r.Oc(2,p,2,4,"label",17),r.Oc(3,f,2,4,"label",17),r.Oc(4,h,3,7,"label",17),r.ac()),2&e){var c=t.$implicit;r.Ib(1),r.uc("ngIf","createdAt"!=c.key&&"updatedAt"!=c.key),r.Ib(1),r.uc("ngIf","createdAt"!=c.key&&"updatedAt"!=c.key),r.Ib(1),r.uc("ngIf","createdAt"==c.key||"updatedAt"==c.key),r.Ib(1),r.uc("ngIf","createdAt"==c.key||"updatedAt"==c.key)}}function v(e,t){if(1&e&&(r.bc(0,"ul",15),r.Oc(1,g,5,4,"li",16),r.ac()),2&e){var c=r.nc();r.Ib(1),r.uc("ngForOf",c.headers)}}function m(e,t){if(1&e){var c=r.cc();r.bc(0,"p",18),r.jc("click",(function(){r.Ic(c);var e=r.nc();return e.downloadRejectRecords(e.fName)})),r.bc(1,"span"),r.bc(2,"a",19),r.Qc(3,"Click Here "),r.ac(),r.ac(),r.Qc(4," to download rejected records.."),r.ac()}}var y,k=((y=function(){function e(t,c,a,n){_classCallCheck(this,e),this.batchService=t,this.activatedRoute=c,this.location=a,this.userService=n,this.headers=[{label:"Batch Name",key:"batchName",lclass:"key",vclass:"value ml-3"},{label:"File Name",key:"fileName",lclass:"key",vclass:"value ml-3"},{label:"Batch Instance Id",key:"batchInstanceID",lclass:"key",vclass:"value ml-3"},{label:"Status",key:"status",lclass:"key",vclass:"badge badge-warning value ml-3"},{label:"Merchant ID",key:"parentID",lclass:"key",vclass:"value ml-3"},{label:"Uploaded By",key:"uploadedBy",lclass:"key",vclass:"value ml-3"},{label:"Created At",key:"createdAt",lclass:"key",vclass:"value ml-3"},{label:"Last Updated At",key:"lastUpdatedAt",lclass:"key",vclass:"value ml-3"}],this.fName="sample";var i=this.activatedRoute.snapshot.paramMap.get("batchId");this.batchInstanceID=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loggedInUser=this.userService.userValue,console.log(this.batchInstanceID),this.batchService.getUploadList({batchInstanceID:this.batchInstanceID}).subscribe((function(t){e.batchDetails=t[0]}),(function(e){console.log(e)}))}},{key:"back",value:function(){this.location.back()}},{key:"downloadRejectRecords",value:function(e){var t=this;this.batchService.getRejectedRecords({batchInstanceID:this.batchInstanceID}).subscribe((function(c){var a=new File([c],e,{type:"text/csv;charset=utf-8"});"GenerateHdfcInvoiceBatch"==t.batchDetails.batchName||"GenerateInvoice"==t.batchDetails.batchName||"HDFCRefundUploadBatch"==t.batchDetails.batchName?(t.fname=t.batchDetails.parentID+"_"+t.batchDetails.batchName+"_"+t.batchDetails.batchInstanceID,o.saveAs(a,t.fname)):o.saveAs(a,t.batchDetails.fileName)}))}}]),e}()).\u0275fac=function(e){return new(e||y)(r.Vb(u),r.Vb(i.a),r.Vb(n.j),r.Vb(d.a))},y.\u0275cmp=r.Pb({type:y,selectors:[["app-batch-details"]],decls:43,vars:5,consts:[[1,"row"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-align-justify","ml-2"],[2,"float","right","margin-top","-20px"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"card-body"],[1,"row","m-3"],[1,"col-md-7"],[1,"card"],["class","col-md-12 pl-3 left","style","list-style:none",4,"ngIf"],[1,"col-md-5"],[1,"col-md-8","pl-3","left",2,"font-weight","500"],[1,"col-md-4"],["style","text-align: center;",3,"click",4,"ngIf"],[1,"col-md-12","pl-3","left",2,"list-style","none"],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],[2,"text-align","center",3,"click"],[2,"color","blue"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"div",1),r.bc(2,"div",2),r.bc(3,"h6"),r.Wb(4,"i",3),r.Qc(5," Batch Details "),r.ac(),r.bc(6,"span",4),r.bc(7,"button",5),r.jc("click",(function(){return t.back()})),r.Qc(8,"Go Back"),r.ac(),r.ac(),r.ac(),r.bc(9,"div",6),r.bc(10,"div",7),r.bc(11,"div",8),r.bc(12,"div",9),r.bc(13,"div",2),r.bc(14,"h6"),r.Wb(15,"i",3),r.Qc(16," Batch Details"),r.ac(),r.ac(),r.bc(17,"div",6),r.bc(18,"div",0),r.Oc(19,v,2,1,"ul",10),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(20,"div",11),r.bc(21,"div",9),r.bc(22,"div",2),r.bc(23,"h6"),r.Wb(24,"i",3),r.Qc(25," Batch Report"),r.ac(),r.ac(),r.bc(26,"div",6),r.bc(27,"div",0),r.bc(28,"div",12),r.bc(29,"p"),r.Qc(30,"Process Count :"),r.ac(),r.bc(31,"p"),r.Qc(32,"Reject Count :"),r.ac(),r.bc(33,"p"),r.Qc(34,"Success Count :"),r.ac(),r.ac(),r.bc(35,"div",13),r.bc(36,"p"),r.Qc(37),r.ac(),r.bc(38,"p"),r.Qc(39),r.ac(),r.bc(40,"p"),r.Qc(41),r.ac(),r.ac(),r.ac(),r.ac(),r.Oc(42,m,5,0,"p",14),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.Ib(19),r.uc("ngIf",t.batchDetails),r.Ib(18),r.Sc(" ",null==t.batchDetails?null:t.batchDetails.processCount," "),r.Ib(2),r.Sc(" ",null==t.batchDetails?null:t.batchDetails.rejectCount," "),r.Ib(2),r.Sc(" ",null==t.batchDetails?null:t.batchDetails.successCount," "),r.Ib(1),r.uc("ngIf",0!=(null==t.batchDetails?null:t.batchDetails.rejectCount)))},directives:[n.n,n.m],pipes:[n.e],styles:[".card[_ngcontent-%COMP%]{width:90%;background-repeat:no-repeat;background-size:100px;background-position:50%;min-height:130px;margin:auto;box-shadow:5px 10px 15px #d1d1d1;border-radius:5px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#c9d9e7}.key[_ngcontent-%COMP%]{font-weight:500;margin-bottom:20px}.value[_ngcontent-%COMP%]{text-align:right}.badge[_ngcontent-%COMP%]{font-size:13px;color:#fff}"]}),y),I=c("mmCC"),C=c("s7LF"),O=c("xkgV");function w(e,t){if(1&e&&(r.bc(0,"option",25),r.Qc(1),r.ac()),2&e){var c=t.$implicit;r.uc("value",c.value),r.Ib(1),r.Sc("",c.value," ")}}function D(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){var c=r.nc().$implicit;r.Ib(1),r.Sc(" ",c.label," \xa0 ")}}function x(e,t){if(1&e&&(r.bc(0,"th"),r.Zb(1,26),r.Oc(2,D,2,1,"span",27),r.Yb(),r.ac()),2&e){var c=t.$implicit;r.Ib(1),r.uc("ngSwitch",c.field)}}function S(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.ac()),2&e){var c=r.nc().$implicit,a=r.nc().$implicit;r.Ib(1),r.Rc(a[c.field])}}function M(e,t){if(1&e&&(r.bc(0,"span"),r.Qc(1),r.oc(2,"date"),r.ac()),2&e){var c=r.nc(2).$implicit;r.Ib(1),r.Rc(r.qc(2,1,c.createdAt,"dd/MM/yyyy h:mma"))}}function P(e,t){if(1&e&&(r.bc(0,"td"),r.Oc(1,S,2,1,"span",18),r.Oc(2,M,3,4,"span",18),r.ac()),2&e){var c=t.$implicit;r.Ib(1),r.uc("ngIf","createdAt"!=c.field),r.Ib(1),r.uc("ngIf","createdAt"===c.field)}}function _(e,t){if(1&e){var c=r.cc();r.bc(0,"tr",29),r.jc("click",(function(){r.Ic(c);var e=t.$implicit;return r.nc(2).routeToDetails(e)})),r.Oc(1,P,3,2,"td",17),r.ac()}if(2&e){var a=r.nc(2);r.Ib(1),r.uc("ngForOf",a.cols)}}var F=function(e,t){return{itemsPerPage:e,currentPage:t}};function j(e,t){if(1&e&&(r.bc(0,"tbody"),r.Oc(1,_,2,1,"tr",28),r.oc(2,"paginate"),r.ac()),2&e){var c=r.nc();r.Ib(1),r.uc("ngForOf",r.qc(2,1,c.batchList,r.zc(4,F,c.itemsPerPage,c.page)))}}function Q(e,t){1&e&&(r.bc(0,"div",30),r.bc(1,"label"),r.Qc(2," Loading . . . "),r.ac(),r.ac())}function A(e,t){1&e&&(r.bc(0,"div",30),r.bc(1,"label"),r.Qc(2," No Data "),r.ac(),r.ac())}function L(e,t){if(1&e){var c=r.cc();r.bc(0,"div",31),r.jc("click",(function(){r.Ic(c);var e=t.$implicit;return r.nc().itemOnPage(e)})),r.Qc(1),r.ac()}if(2&e){var a=t.$implicit,n=r.nc();r.uc("ngClass",n.itemsPerPage==a?"item-number-active":"item-number"),r.Ib(1),r.Sc(" ",a," ")}}function R(e,t){if(1&e&&(r.bc(0,"span",32),r.Qc(1),r.ac()),2&e){var c=r.nc();r.Ib(1),r.Sc("Total Count-",c.batchList.length,"")}}var U,V,B=function(){return{standalone:!0}},N=((U=function(){function e(t,c,a,n){_classCallCheck(this,e),this.router=t,this.batchService=c,this.userService=a,this.transactionService=n,this.cols=[{label:"Batch Name",field:"batchName",sortOptions:"",sort:"text"},{label:"Batch Instance ID",field:"batchInstanceID",sortOptions:"",sort:"number"},{label:"Status",field:"status",sortOptions:"",sort:"text"},{label:"Uploaded By",field:"uploadedBy",sortOptions:"",sort:"text"},{label:"Created At",field:"createdAt",sortOptions:"",sort:"number"},{label:"File Name",field:"fileName",sortOptions:"",sort:"text"}],this.textSortOptions=[{name:"Sort A to Z",value:"ASC",img:"fa fa-sort-alpha-asc"},{name:"Sort Z to A",value:"DESC",img:"fa fa-sort-alpha-desc"}],this.numberSortOptions=[{name:"Sort 0 to 9",value:"ASC",img:"fa fa-sort-numeric-asc"},{name:"Sort 9 to 0",value:"DESC",img:"fa fa-sort-numeric-desc"}],this.itemsPerPage=10,this.page=0,this.entriesOnPage=[10,15,20,25],this.searchCriteria={},this.loading=!0,this.batchList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.loggedInUser=this.userService.userValue,this.Status="ALL",this.searchList(),this.getDropDownValues()}},{key:"searchList",value:function(){var e=this;this.searchCriteria.merchantID=this.loggedInUser.merchantId,console.log(this.searchCriteria.status),this.batchService.getUploadList(this.searchCriteria).subscribe((function(t){e.loading=!1,e.batchList=t.message?[]:t}),(function(e){console.log(e)}))}},{key:"reset",value:function(){this.searchCriteria={},this.searchList()}},{key:"sortingClick",value:function(e){this.sortField=this.selectedField,this.customSort({field:this.selectedField,order:"ASC"===e?1:-1,data:this.batchList})}},{key:"customSort",value:function(e){this.sortField.length>0&&(e.data&&e.data.sort((function(t,c){var a,n=t[e.field],i=c[e.field];return a=null==n&&null!=i?-1:null!=n&&null==i?1:null==n&&null==i?0:"string"==typeof n&&"string"==typeof i?n.localeCompare(i):n<i?-1:n>i?1:0,e.order*a})),this.sortField="")}},{key:"setSortOption",value:function(e,t){var c=this;this.cols.forEach((function(a){e===a.field&&(a.sortOptions=t,c.selectedSortOption=t)}))}},{key:"routeToDetails",value:function(e){this.router.navigate(["batch/details/"+e.batchInstanceID])}},{key:"pageChanged",value:function(e){this.page=e}},{key:"itemOnPage",value:function(e){this.page=0,this.itemsPerPage=e}},{key:"getDropDownValues",value:function(){var e=this;this.transactionService.dropdownList().subscribe((function(t){console.log(t),e.dropDownList=t}))}}]),e}()).\u0275fac=function(e){return new(e||U)(r.Vb(i.c),r.Vb(u),r.Vb(d.a),r.Vb(I.a))},U.\u0275cmp=r.Pb({type:U,selectors:[["app-batch-status"]],decls:43,vars:15,consts:[[1,"row"],[1,"card","mt-3","pb-0"],[1,"card-header"],[1,"fa","fa-info","ml-2","mr-1",2,"font-weight","500"],[1,"card-body",2,"padding","0.7rem"],[1,"col-md-12"],[1,"row","pl-3","pr-5"],[1,"col-md-3"],["type","text","ngDefaultControl","",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["ngDefaultControl","",1,"custom-select","mb-2","mr-sm-2","mb-sm-0",3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","pt-4"],[1,"btn","btn-primary","ml-4",3,"click"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"card","table-data"],[1,"card-body","pb-0","show-data"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-md-12 pb-2","style","text-align: center;",4,"ngIf"],[1,"card-footer","pt-3","pb-1","pl-3"],[1,"p-2"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"float-right","mr-2",3,"pageChange"],["class","s1","style","text-align: center; color: gray; font-weight: 500;float: right;",4,"ngIf"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"col-md-12","pb-2",2,"text-align","center"],[3,"ngClass","click"],[1,"s1",2,"text-align","center","color","gray","font-weight","500","float","right"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"div",1),r.bc(2,"div",2),r.bc(3,"h6"),r.Wb(4,"i",3),r.Qc(5," Batch Status "),r.ac(),r.ac(),r.bc(6,"div",4),r.bc(7,"div",0),r.bc(8,"div",5),r.bc(9,"div",6),r.bc(10,"div",7),r.bc(11,"label"),r.Qc(12,"Batch Name"),r.ac(),r.bc(13,"input",8),r.jc("ngModelChange",(function(e){return t.searchCriteria.batchName=e})),r.ac(),r.ac(),r.bc(14,"div",7),r.bc(15,"label"),r.Qc(16,"Status"),r.ac(),r.bc(17,"select",9),r.jc("ngModelChange",(function(e){return t.searchCriteria.status=e})),r.Oc(18,w,2,2,"option",10),r.oc(19,"keyvalue"),r.ac(),r.ac(),r.bc(20,"div",11),r.bc(21,"button",12),r.jc("click",(function(){return t.searchList()})),r.Qc(22," Search"),r.ac(),r.bc(23,"button",13),r.jc("click",(function(){return t.reset()})),r.Qc(24," Reset "),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(25,"div",14),r.bc(26,"div",15),r.bc(27,"table",16),r.bc(28,"thead"),r.bc(29,"tr"),r.Oc(30,x,3,1,"th",17),r.ac(),r.ac(),r.Oc(31,j,3,7,"tbody",18),r.ac(),r.bc(32,"div",0),r.Oc(33,Q,3,0,"div",19),r.Oc(34,A,3,0,"div",19),r.ac(),r.ac(),r.bc(35,"div",20),r.bc(36,"span",21),r.Qc(37," Show "),r.ac(),r.Oc(38,L,2,2,"div",22),r.bc(39,"span",21),r.Qc(40," entries per page "),r.ac(),r.bc(41,"pagination-controls",23),r.jc("pageChange",(function(e){return t.pageChanged(e)})),r.ac(),r.Oc(42,R,2,1,"span",24),r.ac(),r.ac(),r.ac()),2&e&&(r.Ib(13),r.uc("ngModelOptions",r.xc(13,B))("ngModel",t.searchCriteria.batchName),r.Ib(4),r.uc("ngModelOptions",r.xc(14,B))("ngModel",t.searchCriteria.status),r.Ib(1),r.uc("ngForOf",r.pc(19,11,null==t.dropDownList?null:t.dropDownList.batchStatus)),r.Ib(12),r.uc("ngForOf",t.cols),r.Ib(1),r.uc("ngIf",!t.loading&&t.batchList.length>0),r.Ib(2),r.uc("ngIf",t.loading),r.Ib(1),r.uc("ngIf",!t.loading&&0===t.batchList.length),r.Ib(4),r.uc("ngForOf",t.entriesOnPage),r.Ib(4),r.uc("ngIf",!t.loading))},directives:[C.b,C.n,C.q,C.x,n.m,n.n,O.c,C.r,C.z,n.p,n.r,n.l],pipes:[n.h,O.b,n.e],styles:[".card[_ngcontent-%COMP%]{width:100%!important}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:0}label[_ngcontent-%COMP%]{font-weight:500}th[_ngcontent-%COMP%]{border-top:none}.item-number[_ngcontent-%COMP%], .item-number-active[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,50.2%,.7);padding-left:9px;padding-right:9px;padding-top:2px;height:30px;cursor:pointer;margin:1px}.item-number-active[_ngcontent-%COMP%]{background-color:#2199e8;color:#fff}.dropdown-menu[_ngcontent-%COMP%]{min-width:0;margin-left:-60px}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{border:none;cursor:pointer;padding:7px 17px!important}.table-data[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:100px;background-position:50%;min-height:130px;margin:auto;box-shadow:5px 10px 15px #d1d1d1;border-radius:5px}"]}),U),E=c("OC8m"),T=((V=function(){function e(){_classCallCheck(this,e),this.fileDropped=new r.q}return _createClass(e,[{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}},{key:"onDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}},{key:"ondrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;var t=e.dataTransfer.files;t.length>0&&this.fileDropped.emit(t)}}]),e}()).\u0275fac=function(e){return new(e||V)},V.\u0275dir=r.Qb({type:V,selectors:[["","appDragToUploadFile",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.jc("dragover",(function(e){return t.onDragOver(e)}))("dragleave",(function(e){return t.onDragLeave(e)}))("drop",(function(e){return t.ondrop(e)})),2&e&&r.Mb("fileover",t.fileOver)},outputs:{fileDropped:"fileDropped"}}),V);function $(e,t){1&e&&(r.bc(0,"div",21),r.mc(),r.bc(1,"svg",22),r.bc(2,"style"),r.Qc(3," .line { fill: none; stroke: #aaa; stroke-width: 8; stroke-dasharray: 40 } .animated { animation: draw .8s ease-in-out; animation-iteration-count: infinite; stroke-dashoffset: 0 } .line2 { animation-delay: .08s } .line3 { animation-delay: .16s } @keyframes draw { 0% { stroke-dashoffset: 0 } 50% { stroke-dashoffset: 30 } 100% { stroke-dashoffset: 0 } } "),r.ac(),r.Wb(4,"path",23),r.Wb(5,"path",24),r.Wb(6,"path",25),r.ac(),r.ac())}var W,q,z,H=[{path:"",data:{title:"batch"},children:[{path:"upload",component:(W=function(){function e(t,c,a,n){_classCallCheck(this,e),this.batchService=t,this.router=c,this.notificationService=a,this.userService=n,this.processing=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.loggedInUser=this.userService.userValue,console.log(this.loggedInUser)}},{key:"fileDropped",value:function(e){console.log(e)}},{key:"uploadFile",value:function(e){if(this.isValidCSVFile(e.target.files[0])){this.fileName=e?e.target.files[0].name:"";var t=this.fileName.split("-");this.headertext="GENERATEINVOICE File for Merchant ID : ".concat(t[0]," "),this.selectedFile=e.target.files[0]}}},{key:"onDrop",value:function(e){if(this.isValidCSVFile(e[0])){this.fileName=e?e[0].name:"";var t=this.fileName.split("-");this.headertext="GENERATEINVOICE File for Merchant ID : ".concat(t[0]," "),this.selectedFile=e[0]}}},{key:"uploadbatch",value:function(){var e=this,t={merchantID:this.loggedInUser.merchantId,merchantType:this.loggedInUser.merchantType,uploadedBy:this.loggedInUser.merchantName};null==this.selectedFile&&(this.selectedFile=null),this.processing=!0,this.batchService.batchUpload(this.selectedFile,t).subscribe((function(t){e.processing=!1,"Error"!==t.status?(e.notificationService.showSuccess("File uploaded successfully",""),e.fileName=""):e.notificationService.showError(t.message,"")}),(function(t){e.processing=!1,e.notificationService.showError(t.error.message,"")}))}},{key:"isValidCSVFile",value:function(e){return e.name.endsWith(".csv")}}]),e}(),W.\u0275fac=function(e){return new(e||W)(r.Vb(u),r.Vb(i.c),r.Vb(E.a),r.Vb(d.a))},W.\u0275cmp=r.Pb({type:W,selectors:[["app-batch-upload"]],decls:30,vars:4,consts:[[1,"row"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-upload","ml-2","mr-1",2,"font-weight","700"],[1,"card-body"],[1,"mer-id"],[1,"form-group","row"],["appDragToUploadFile","",1,"drag-drop-file-here",3,"fileDropped"],[1,"title-click-here"],[1,"or","p-2"],[1,"row","form-group","p-2"],[1,"col-md-1"],[1,"col-md-8","pt-2","file-inp",3,"click"],[1,"pl-3"],["id","inputFile","hidden","","type","file","accept",".csv",3,"change"],["upload",""],[1,"col-md-3"],["type","button",1,"browse","btn","btn-secondary",3,"click"],[1,"row","p-2"],["type","button",1,"btn","btn-primary","text-center",3,"disabled","click"],["class","upload-process",4,"ngIf"],[1,"upload-process"],["xmlns","http://www.w3.org/2000/svg","width","100","height","60"],["d","M14 10V50z",1,"line","animated"],["d","M30 10V50z",1,"line","animated","line2"],["d","M46 10V50z",1,"line","animated","line3"]],template:function(e,t){if(1&e){var c=r.cc();r.bc(0,"div",0),r.bc(1,"div",1),r.bc(2,"div",2),r.bc(3,"h6"),r.Wb(4,"i",3),r.Qc(5," Batch Upload "),r.ac(),r.ac(),r.bc(6,"div",4),r.bc(7,"h4",5),r.Qc(8),r.ac(),r.bc(9,"div",6),r.bc(10,"div",7),r.jc("fileDropped",(function(e){return t.onDrop(e)})),r.bc(11,"p",8),r.Qc(12,"Drag & Drop File "),r.ac(),r.bc(13,"p",9),r.Qc(14,"Or"),r.ac(),r.bc(15,"div",10),r.Wb(16,"div",11),r.bc(17,"div",12),r.jc("click",(function(){return r.Ic(c),r.Fc(21).click()})),r.bc(18,"span",13),r.Qc(19),r.ac(),r.bc(20,"input",14,15),r.jc("change",(function(e){return t.uploadFile(e)})),r.ac(),r.ac(),r.bc(22,"div",16),r.bc(23,"button",17),r.jc("click",(function(){return r.Ic(c),r.Fc(21).click()})),r.Qc(24," Browse"),r.ac(),r.ac(),r.ac(),r.bc(25,"div",18),r.bc(26,"button",19),r.jc("click",(function(){return t.uploadbatch()})),r.Qc(27," Upload"),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(28,"div",6),r.Oc(29,$,7,0,"div",20),r.ac(),r.ac(),r.ac(),r.ac()}2&e&&(r.Ib(8),r.Rc(t.headertext),r.Ib(11),r.Rc(t.fileName),r.Ib(7),r.uc("disabled",t.processing),r.Ib(3),r.uc("ngIf",t.processing))},directives:[T,n.n],styles:[".card[_ngcontent-%COMP%]{width:80%;margin:auto}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#c9d9e7}.drag-drop-file-here[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:100px;background-position:50%;min-height:130px;padding-top:10px;box-shadow:5px 10px 15px #d1d1d1;background-color:#ebeef0!important;border-radius:5px}.drag-drop-file-here[_ngcontent-%COMP%], .upload-process[_ngcontent-%COMP%]{width:60%;margin:auto}.drag-drop-file-here[_ngcontent-%COMP%]:hover{background-color:#ebeef0!important;opacity:.8}.drag-drop-file-here__text[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;width:50%;margin-top:20px}.fa--margin-color[_ngcontent-%COMP%]{color:#00b0f0;margin:50px 47% auto}.title-click-here[_ngcontent-%COMP%]{font-weight:700;padding-top:5px}.or[_ngcontent-%COMP%], .title-click-here[_ngcontent-%COMP%]{text-align:center;margin-bottom:5px!important}.upload-btn-wrapper[_ngcontent-%COMP%]{text-align:center}.input-group[_ngcontent-%COMP%]{background-color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]{background-color:#5c4084;border-color:#5c4084;outline:none;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#442f62;border-color:#442f62}.btn.btn-secondary[_ngcontent-%COMP%]:active, .btn.btn-secondary[_ngcontent-%COMP%]:focus{background-color:#684895;border-color:#684895}.file-inp[_ngcontent-%COMP%]{background-color:#fff!important;margin-right:-14px}.mer-id[_ngcontent-%COMP%]{color:green;text-align:center}.text-center[_ngcontent-%COMP%]{margin:auto}"]}),W),data:{title:"Upload"}},{path:"status",component:N,data:{title:"Status"}},{path:"details/:batchId",component:k,data:{title:"Details"}}]}],G=((q=function e(){_classCallCheck(this,e)}).\u0275mod=r.Tb({type:q}),q.\u0275inj=r.Sb({factory:function(e){return new(e||q)},imports:[[i.g.forChild(H)],i.g]}),q),K=c("FE24"),J=c("kFe1"),Z=c("LqlI"),X=((z=function e(){_classCallCheck(this,e)}).\u0275mod=r.Tb({type:z}),z.\u0275inj=r.Sb({factory:function(e){return new(e||z)},providers:[Z.b],imports:[[n.c,G,O.a,K.c,C.i,J.b.forRoot(),Z.d.forRoot()]]}),z)},Iab2:function(e,t,c){var a,n;void 0===(n="function"==typeof(a=function(){"use strict";function t(e,t,c){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){o(a.response,t,c)},a.onerror=function(){console.error("could not download file")},a.send()}function c(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(c)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,o){var r=n.URL||n.webkitURL,l=document.createElement("a");l.download=i=i||e.name||"download",l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):c(l.href)?t(e,i,o):a(l,l.target="_blank")):(l.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(c(e))t(e,n,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){a(o)}))}}:function(e,c,a,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,c,a);var r="application/octet-stream"===e.type,l=/constructor/i.test(n.HTMLElement)||n.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&l||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},d.readAsDataURL(e)}else{var u=n.URL||n.webkitURL,b=u.createObjectURL(e);o?o.location=b:location.href=b,o=null,setTimeout((function(){u.revokeObjectURL(b)}),4e4)}});n.saveAs=o.saveAs=o,e.exports=o})?a.apply(t,[]):a)||(e.exports=n)}}]);
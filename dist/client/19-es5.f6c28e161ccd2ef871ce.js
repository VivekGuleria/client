function _classCallCheck(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,c){for(var t=0;t<c.length;t++){var n=c[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,c,t){return c&&_defineProperties(e.prototype,c),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"f/ku":function(e,c,t){"use strict";t.r(c),t.d(c,"KeyManagementModule",(function(){return j}));var n,a=t("SVse"),i=t("iInd"),r=t("orU0"),o=t("8Y7J"),l=t("AytR"),s=t("IheW"),u=t("qfBg"),f=((n=function(){function e(c,t){_classCallCheck(this,e),this.http=c,this.userService=t,this.baseUrl=l.a.url}return _createClass(e,[{key:"getAllKey",value:function(e){return this.http.post(this.userService.urlValue.url+"/api/merchant/fetch-key",e)}},{key:"generateKey",value:function(e){return this.http.post(this.userService.urlValue.url+"/api/merchant/generate-key",e)}},{key:"downloadKey",value:function(e){return this.http.post(this.userService.urlValue.url+"/api/merchant/download-key",e)}}]),e}()).\u0275fac=function(e){return new(e||n)(o.fc(s.b),o.fc(u.a))},n.\u0275prov=o.Rb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),b=t("OC8m"),y=t("q17e");function d(e,c){if(1&e&&(o.bc(0,"span"),o.Qc(1),o.ac()),2&e){var t=o.nc().$implicit;o.Ib(1),o.Sc(" ",t.label," \xa0 ")}}function p(e,c){if(1&e&&(o.bc(0,"th"),o.Zb(1,9),o.Oc(2,d,2,1,"span",10),o.Yb(),o.ac()),2&e){var t=c.$implicit;o.Ib(1),o.uc("ngSwitch",t.field)}}function v(e,c){if(1&e){var t=o.cc();o.bc(0,"button",12),o.jc("click",(function(){return o.Ic(t),o.nc(2).generateKey()})),o.Qc(1,"Generate Key"),o.ac()}}var g=function(e){return[e]};function h(e,c){if(1&e&&(o.bc(0,"tr"),o.bc(1,"td"),o.Qc(2,"No Data"),o.ac(),o.bc(3,"td"),o.Qc(4,"No Data"),o.ac(),o.bc(5,"td"),o.Qc(6,"No Data"),o.ac(),o.bc(7,"td"),o.Qc(8,"No Data"),o.ac(),o.bc(9,"td"),o.Oc(10,v,2,0,"button",11),o.ac(),o.ac()),2&e){var t=o.nc();o.Ib(10),o.uc("appUserAccess",o.yc(1,g,t.roleAccess.viewKeyManagementGenerateKey))}}function m(e,c){if(1&e&&(o.bc(0,"div"),o.Qc(1),o.ac()),2&e){var t=o.nc().$implicit,n=o.nc().$implicit;o.Ib(1),o.Rc(n[t.field])}}function w(e,c){if(1&e&&(o.bc(0,"span"),o.Qc(1),o.oc(2,"date"),o.ac()),2&e){var t=o.nc(2).$implicit;o.Ib(1),o.Rc(o.qc(2,1,t.expiryDate,"dd/MM/yyyy"))}}function K(e,c){if(1&e&&(o.bc(0,"span"),o.Qc(1),o.oc(2,"date"),o.ac()),2&e){var t=o.nc(2).$implicit;o.Ib(1),o.Rc(o.qc(2,1,t.newKeyEffectiveDate,"dd/MM/yyyy"))}}function I(e,c){1&e&&(o.bc(0,"span"),o.Qc(1,"---"),o.ac())}function k(e,c){1&e&&(o.bc(0,"span"),o.Qc(1,"---"),o.ac())}function O(e,c){if(1&e&&(o.bc(0,"td"),o.Oc(1,m,2,1,"div",8),o.Oc(2,w,3,4,"span",8),o.Oc(3,K,3,4,"span",8),o.Oc(4,I,2,0,"span",8),o.Oc(5,k,2,0,"span",8),o.ac()),2&e){var t=c.$implicit,n=o.nc().$implicit;o.Ib(1),o.uc("ngIf","expiryDate"!=t.field&&"newKeyEffectiveDate"!==t.field),o.Ib(1),o.uc("ngIf","expiryDate"===t.field),o.Ib(1),o.uc("ngIf","newKeyEffectiveDate"===t.field),o.Ib(1),o.uc("ngIf","newKeyEffectiveDate"===t.field&&null==n[t.field]),o.Ib(1),o.uc("ngIf","expiryDate"===t.field&&null==n[t.field])}}function D(e,c){if(1&e){var t=o.cc();o.bc(0,"button",18),o.jc("click",(function(){return o.Ic(t),o.nc(3).generateKey()})),o.Qc(1,"Re-Generate Key"),o.ac()}}function S(e,c){if(1&e){var t=o.cc();o.bc(0,"button",19),o.jc("click",(function(){return o.Ic(t),o.nc(3).downloadKey()})),o.Qc(1,"Download Key"),o.ac()}}function C(e,c){if(1&e&&(o.bc(0,"div",15),o.Oc(1,D,2,0,"button",16),o.Oc(2,S,2,0,"button",17),o.ac()),2&e){var t=o.nc(2);o.Ib(1),o.uc("appUserAccess",o.yc(2,g,t.roleAccess.viewKeyManagementReGenerateKey)),o.Ib(1),o.uc("appUserAccess",o.yc(4,g,t.roleAccess.viewKeyManagementDownloadKey))}}function M(e,c){if(1&e){var t=o.cc();o.bc(0,"button",24),o.jc("click",(function(){return o.Ic(t),o.nc(4).generateKey()})),o.Qc(1,"Re-Generate Key"),o.ac()}}function x(e,c){if(1&e){var t=o.cc();o.bc(0,"button",12),o.jc("click",(function(){return o.Ic(t),o.nc(4).downloadKey()})),o.Qc(1,"Download Key"),o.ac()}}function A(e,c){if(1&e&&(o.bc(0,"div",22),o.Oc(1,M,2,0,"button",23),o.Oc(2,x,2,0,"button",11),o.ac()),2&e){var t=o.nc(3);o.Ib(1),o.uc("appUserAccess",o.yc(2,g,t.roleAccess.viewKeyManagementReGenerateKey)),o.Ib(1),o.uc("appUserAccess",o.yc(4,g,t.roleAccess.viewKeyManagementDownloadKey))}}function _(e,c){if(1&e&&(o.bc(0,"td",20),o.Oc(1,A,3,6,"div",21),o.ac()),2&e){var t=o.nc().$implicit,n=o.nc();o.Ib(1),o.uc("ngIf",1==(null==n.allKeyData?null:n.allKeyData.length)&&0==t.keyIndex)}}function Q(e,c){if(1&e&&(o.bc(0,"tr"),o.Oc(1,O,6,5,"td",7),o.bc(2,"td"),o.Oc(3,C,3,6,"div",13),o.ac(),o.Oc(4,_,2,1,"ng-template",null,14,o.Pc),o.ac()),2&e){var t=c.$implicit,n=o.Fc(5),a=o.nc();o.Ib(1),o.uc("ngForOf",a.cols),o.Ib(2),o.uc("ngIf",2==(null==a.allKeyData?null:a.allKeyData.length)&&1==t.keyIndex)("ngIfElse",n)}}var P,U,R,E=[{path:"",component:(P=function(){function e(c,t,n){_classCallCheck(this,e),this.keyManagementService=c,this.userService=t,this.notifyService=n,this.roleAccess=r.a,this.cols=[{label:"Key ID",field:"secretKey",sortOptions:"",sort:"text"},{label:"Key Index",field:"keyIndex",sortOptions:"",sort:"number"},{label:"Expiry Date",field:"expiryDate",sortOptions:"",sort:"text"},{label:"Key Effective Date",field:"newKeyEffectiveDate",sortOptions:"",sort:"number"}]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllKey()}},{key:"getAllKey",value:function(){var e=this;this.keyManagementService.getAllKey({merchantid:this.userService.userValue.merchantId}).subscribe((function(c){e.allKeyData=c}))}},{key:"generateKey",value:function(){var e=this;this.keyManagementService.generateKey({merchantid:this.userService.userValue.merchantId}).subscribe((function(c){console.log(c),e.notifyService.showSuccess("Key Generated Successfully",""),setTimeout((function(){e.downloadKey()}),2e3),setTimeout((function(){location.reload()}),4e3)}))}},{key:"downloadKey",value:function(){var e=this;this.keyManagementService.downloadKey({merchantid:this.userService.userValue.merchantId}).subscribe((function(c){console.log(c.secretKey);var t=new window.Blob([c.secretKey],{type:"text"}),n=document.createElement("a");n.style.display="none";var a=URL.createObjectURL(t);n.href=a,n.download="secretKey",n.click(),e.notifyService.showSuccess("Secret Key Downloaded Successfully","")}))}}]),e}(),P.\u0275fac=function(e){return new(e||P)(o.Vb(f),o.Vb(u.a),o.Vb(b.a))},P.\u0275cmp=o.Pb({type:P,selectors:[["app-key-management"]],decls:16,vars:3,consts:[[1,"container-fluid",2,"height","100vh"],[1,"row","box","mt-3"],[1,"col-md-12","card-header",2,"font-weight","700","font-size","16px"],[1,"fa","fa-key","ml-2",2,"font-weight","700"],[1,"row","box","mt-2"],[1,"col-md-12",2,"overflow-x","scroll"],[1,"table","table-striped","table-hover","table-responsive-lg"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchDefault"],["type","button","class","btn btn-primary btn-sm","style","font-size: 0.7vw;",3,"click",4,"appUserAccess"],["type","button",1,"btn","btn-primary","btn-sm",2,"font-size","0.7vw",3,"click"],["class","btn-group mt-2","role","group",4,"ngIf","ngIfElse"],["change",""],["role","group",1,"btn-group","mt-2"],["class","btn btn-danger btn-sm mr-1","style","font-size: 0.7vw;",3,"click",4,"appUserAccess"],["class","btn btn-primary btn-sm","style","font-size: 0.7vw;",3,"click",4,"appUserAccess"],[1,"btn","btn-danger","btn-sm","mr-1",2,"font-size","0.7vw",3,"click"],[1,"btn","btn-primary","btn-sm",2,"font-size","0.7vw",3,"click"],[2,"display","inline"],["class","btn-group","role","group",4,"ngIf"],["role","group",1,"btn-group"],["type","button","class","btn btn-danger btn-sm mr-1","style","font-size: 0.7vw;",3,"click",4,"appUserAccess"],["type","button",1,"btn","btn-danger","btn-sm","mr-1",2,"font-size","0.7vw",3,"click"]],template:function(e,c){1&e&&(o.bc(0,"div",0),o.bc(1,"div",1),o.bc(2,"div",2),o.Wb(3,"i",3),o.Qc(4,"Key Management "),o.ac(),o.ac(),o.bc(5,"div",4),o.bc(6,"div",5),o.bc(7,"table",6),o.bc(8,"thead"),o.bc(9,"tr"),o.Oc(10,p,3,1,"th",7),o.bc(11,"th"),o.Qc(12,"Action"),o.ac(),o.ac(),o.ac(),o.bc(13,"tbody"),o.Oc(14,h,11,3,"tr",8),o.Oc(15,Q,6,3,"tr",7),o.ac(),o.ac(),o.ac(),o.ac(),o.ac()),2&e&&(o.Ib(10),o.uc("ngForOf",c.cols),o.Ib(4),o.uc("ngIf",0==(null==c.allKeyData?null:c.allKeyData.length)),o.Ib(1),o.uc("ngForOf",c.allKeyData))},directives:[a.m,a.n,a.p,a.r,y.a],pipes:[a.e],styles:["th[_ngcontent-%COMP%]{white-space:normal;word-wrap:break-word}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border-top:none;text-align:center}td[_ngcontent-%COMP%]{padding:5px;vertical-align:middle}.box[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border-radius:3px}"]}),P)}],V=((U=function e(){_classCallCheck(this,e)}).\u0275mod=o.Tb({type:U}),U.\u0275inj=o.Sb({factory:function(e){return new(e||U)},imports:[[i.g.forChild(E)],i.g]}),U),$=t("d2mR"),j=((R=function e(){_classCallCheck(this,e)}).\u0275mod=o.Tb({type:R}),R.\u0275inj=o.Sb({factory:function(e){return new(e||R)},imports:[[a.c,V,$.a]]}),R)}}]);